/*! third party licenses: js/vendor.LICENSE.txt */
import{l as pr,P as dr,p as Ct,a0 as gr,a1 as on}from"./index-CmFt3hdP.chunk.mjs";import{l as sn,S as Xt,f as Wt,i as we,U as mr,X as vr,h as wr}from"./index-BhDGmKuu.chunk.mjs";function ye(){return sn("files_sharing","isPublic",null)??document.querySelector('input#isPublic[type="hidden"][name="isPublic"][value="1"]')!==null}function yr(){return sn("files_sharing","sharingToken",null)??document.querySelector('input#sharingToken[type="hidden"]')?.value??null}function Tt(u,h,v){return h in u?Object.defineProperty(u,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):u[h]=v,u}function Ye(u,h,v){br(u,h),h.set(u,v)}function br(u,h){if(h.has(u))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ft(u,h){var v=an(u,h,"get");return xr(u,v)}function xr(u,h){return h.get?h.get.call(u):h.value}function Je(u,h,v){var N=an(u,h,"set");return Er(u,N,v),v}function an(u,h,v){if(!h.has(u))throw new TypeError("attempted to "+v+" private field on non-instance");return h.get(u)}function Er(u,h,v){if(h.set)h.set.call(u,v);else{if(!h.writable)throw new TypeError("attempted to set read only private field");h.value=v}}var Nr=typeof Symbol<"u"?Symbol.toStringTag:"@@toStringTag",dt=new WeakMap,Ft=new WeakMap;class Ht{constructor(h){var{executor:v=()=>{},internals:N=xe(),promise:x=new Promise((j,E)=>v(j,E,g=>{N.onCancelList.push(g)}))}=h;Ye(this,dt,{writable:!0,value:void 0}),Ye(this,Ft,{writable:!0,value:void 0}),Tt(this,Nr,"CancelablePromise"),this.cancel=this.cancel.bind(this),Je(this,dt,N),Je(this,Ft,x||new Promise((j,E)=>v(j,E,g=>{N.onCancelList.push(g)})))}then(h,v){return Zt(ft(this,Ft).then(qt(h,ft(this,dt)),qt(v,ft(this,dt))),ft(this,dt))}catch(h){return Zt(ft(this,Ft).catch(qt(h,ft(this,dt))),ft(this,dt))}finally(h,v){return v&&ft(this,dt).onCancelList.push(h),Zt(ft(this,Ft).finally(qt(()=>{if(h)return v&&(ft(this,dt).onCancelList=ft(this,dt).onCancelList.filter(N=>N!==h)),h()},ft(this,dt))),ft(this,dt))}cancel(){ft(this,dt).isCanceled=!0;var h=ft(this,dt).onCancelList;ft(this,dt).onCancelList=[];for(var v of h)if(typeof v=="function")try{v()}catch(N){console.error(N)}}isCanceled(){return ft(this,dt).isCanceled===!0}}class Ot extends Ht{constructor(h){super({executor:h})}}Tt(Ot,"all",function(u){return Gt(u,Promise.all(u))}),Tt(Ot,"allSettled",function(u){return Gt(u,Promise.allSettled(u))}),Tt(Ot,"any",function(u){return Gt(u,Promise.any(u))}),Tt(Ot,"race",function(u){return Gt(u,Promise.race(u))}),Tt(Ot,"resolve",function(u){return tn(Promise.resolve(u))}),Tt(Ot,"reject",function(u){return tn(Promise.reject(u))}),Tt(Ot,"isCancelable",be);function tn(u){return Zt(u,xe())}function be(u){return u instanceof Ot||u instanceof Ht}function qt(u,h){if(u)return v=>{if(!h.isCanceled){var N=u(v);return be(N)&&h.onCancelList.push(N.cancel),N}return v}}function Zt(u,h){return new Ht({internals:h,promise:u})}function Gt(u,h){var v=xe();return v.onCancelList.push(()=>{for(var N of u)be(N)&&N.cancel()}),new Ht({internals:v,promise:h})}function xe(){return{isCanceled:!1,onCancelList:[]}}var de={},Ar={2:u=>{function h(x,j,E){x instanceof RegExp&&(x=v(x,E)),j instanceof RegExp&&(j=v(j,E));var g=N(x,j,E);return g&&{start:g[0],end:g[1],pre:E.slice(0,g[0]),body:E.slice(g[0]+x.length,g[1]),post:E.slice(g[1]+j.length)}}function v(x,j){var E=j.match(x);return E?E[0]:null}function N(x,j,E){var g,O,s,i,f,o=E.indexOf(x),c=E.indexOf(j,o+1),d=o;if(o>=0&&c>0){for(g=[],s=E.length;d>=0&&!f;)d==o?(g.push(d),o=E.indexOf(x,d+1)):g.length==1?f=[g.pop(),c]:((O=g.pop())<s&&(s=O,i=c),c=E.indexOf(j,d+1)),d=o<c&&o>=0?o:c;g.length&&(f=[s,i])}return f}u.exports=h,h.range=N},101:function(u,h,v){var N;u=v.nmd(u),function(x){var j=(u&&u.exports,typeof Wt=="object"&&Wt);j.global!==j&&j.window;var E=function(f){this.message=f};(E.prototype=new Error).name="InvalidCharacterError";var g=function(f){throw new E(f)},O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=/[\t\n\f\r ]/g,i={encode:function(f){f=String(f),/[^\0-\xFF]/.test(f)&&g("The string to be encoded contains characters outside of the Latin1 range.");for(var o,c,d,w,T=f.length%3,L="",p=-1,y=f.length-T;++p<y;)o=f.charCodeAt(p)<<16,c=f.charCodeAt(++p)<<8,d=f.charCodeAt(++p),L+=O.charAt((w=o+c+d)>>18&63)+O.charAt(w>>12&63)+O.charAt(w>>6&63)+O.charAt(63&w);return T==2?(o=f.charCodeAt(p)<<8,c=f.charCodeAt(++p),L+=O.charAt((w=o+c)>>10)+O.charAt(w>>4&63)+O.charAt(w<<2&63)+"="):T==1&&(w=f.charCodeAt(p),L+=O.charAt(w>>2)+O.charAt(w<<4&63)+"=="),L},decode:function(f){var o=(f=String(f).replace(s,"")).length;o%4==0&&(o=(f=f.replace(/==?$/,"")).length),(o%4==1||/[^+a-zA-Z0-9/]/.test(f))&&g("Invalid character: the string to be decoded is not correctly encoded.");for(var c,d,w=0,T="",L=-1;++L<o;)d=O.indexOf(f.charAt(L)),c=w%4?64*c+d:d,w++%4&&(T+=String.fromCharCode(255&c>>(-2*w&6)));return T},version:"1.0.0"};(N=function(){return i}.call(h,v,h,u))===void 0||(u.exports=N)}()},172:(u,h)=>{h.d=function(v){if(!v)return 0;for(var N=(v=v.toString()).length,x=v.length;x--;){var j=v.charCodeAt(x);56320<=j&&j<=57343&&x--,127<j&&j<=2047?N++:2047<j&&j<=65535&&(N+=2)}return N}},526:u=>{var h={utf8:{stringToBytes:function(v){return h.bin.stringToBytes(unescape(encodeURIComponent(v)))},bytesToString:function(v){return decodeURIComponent(escape(h.bin.bytesToString(v)))}},bin:{stringToBytes:function(v){for(var N=[],x=0;x<v.length;x++)N.push(255&v.charCodeAt(x));return N},bytesToString:function(v){for(var N=[],x=0;x<v.length;x++)N.push(String.fromCharCode(v[x]));return N.join("")}}};u.exports=h},298:u=>{var h,v;h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v={rotl:function(N,x){return N<<x|N>>>32-x},rotr:function(N,x){return N<<32-x|N>>>x},endian:function(N){if(N.constructor==Number)return 16711935&v.rotl(N,8)|4278255360&v.rotl(N,24);for(var x=0;x<N.length;x++)N[x]=v.endian(N[x]);return N},randomBytes:function(N){for(var x=[];N>0;N--)x.push(Math.floor(256*Math.random()));return x},bytesToWords:function(N){for(var x=[],j=0,E=0;j<N.length;j++,E+=8)x[E>>>5]|=N[j]<<24-E%32;return x},wordsToBytes:function(N){for(var x=[],j=0;j<32*N.length;j+=8)x.push(N[j>>>5]>>>24-j%32&255);return x},bytesToHex:function(N){for(var x=[],j=0;j<N.length;j++)x.push((N[j]>>>4).toString(16)),x.push((15&N[j]).toString(16));return x.join("")},hexToBytes:function(N){for(var x=[],j=0;j<N.length;j+=2)x.push(parseInt(N.substr(j,2),16));return x},bytesToBase64:function(N){for(var x=[],j=0;j<N.length;j+=3)for(var E=N[j]<<16|N[j+1]<<8|N[j+2],g=0;g<4;g++)8*j+6*g<=8*N.length?x.push(h.charAt(E>>>6*(3-g)&63)):x.push("=");return x.join("")},base64ToBytes:function(N){N=N.replace(/[^A-Z0-9+\/]/gi,"");for(var x=[],j=0,E=0;j<N.length;E=++j%4)E!=0&&x.push((h.indexOf(N.charAt(j-1))&Math.pow(2,-2*E+8)-1)<<2*E|h.indexOf(N.charAt(j))>>>6-2*E);return x}},u.exports=v},635:(u,h,v)=>{const N=v(31),x=v(338),j=v(221);u.exports={XMLParser:x,XMLValidator:N,XMLBuilder:j}},705:(u,h)=>{const v=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",N="["+v+"]["+v+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",x=new RegExp("^"+N+"$");h.isExist=function(j){return j!==void 0},h.isEmptyObject=function(j){return Object.keys(j).length===0},h.merge=function(j,E,g){if(E){const O=Object.keys(E),s=O.length;for(let i=0;i<s;i++)j[O[i]]=g==="strict"?[E[O[i]]]:E[O[i]]}},h.getValue=function(j){return h.isExist(j)?j:""},h.isName=function(j){return x.exec(j)!=null},h.getAllMatches=function(j,E){const g=[];let O=E.exec(j);for(;O;){const s=[];s.startIndex=E.lastIndex-O[0].length;const i=O.length;for(let f=0;f<i;f++)s.push(O[f]);g.push(s),O=E.exec(j)}return g},h.nameRegexp=N},31:(u,h,v)=>{const N=v(705),x={allowBooleanAttributes:!1,unpairedTags:[]};function j(p){return p===" "||p==="	"||p===`
`||p==="\r"}function E(p,y){const C=y;for(;y<p.length;y++)if(!(p[y]!="?"&&p[y]!=" ")){const m=p.substr(C,y-C);if(y>5&&m==="xml")return d("InvalidXml","XML declaration allowed only at the start of the document.",T(p,y));if(p[y]=="?"&&p[y+1]==">"){y++;break}}return y}function g(p,y){if(p.length>y+5&&p[y+1]==="-"&&p[y+2]==="-"){for(y+=3;y<p.length;y++)if(p[y]==="-"&&p[y+1]==="-"&&p[y+2]===">"){y+=2;break}}else if(p.length>y+8&&p[y+1]==="D"&&p[y+2]==="O"&&p[y+3]==="C"&&p[y+4]==="T"&&p[y+5]==="Y"&&p[y+6]==="P"&&p[y+7]==="E"){let C=1;for(y+=8;y<p.length;y++)if(p[y]==="<")C++;else if(p[y]===">"&&(C--,C===0))break}else if(p.length>y+9&&p[y+1]==="["&&p[y+2]==="C"&&p[y+3]==="D"&&p[y+4]==="A"&&p[y+5]==="T"&&p[y+6]==="A"&&p[y+7]==="["){for(y+=8;y<p.length;y++)if(p[y]==="]"&&p[y+1]==="]"&&p[y+2]===">"){y+=2;break}}return y}h.validate=function(p,y){y=Object.assign({},x,y);const C=[];let m=!1,_=!1;p[0]==="\uFEFF"&&(p=p.substr(1));for(let S=0;S<p.length;S++)if(p[S]==="<"&&p[S+1]==="?"){if(S+=2,S=E(p,S),S.err)return S}else{if(p[S]!=="<"){if(j(p[S]))continue;return d("InvalidChar","char '"+p[S]+"' is not expected.",T(p,S))}{let F=S;if(S++,p[S]==="!"){S=g(p,S);continue}{let z=!1;p[S]==="/"&&(z=!0,S++);let D="";for(;S<p.length&&p[S]!==">"&&p[S]!==" "&&p[S]!=="	"&&p[S]!==`
`&&p[S]!=="\r";S++)D+=p[S];if(D=D.trim(),D[D.length-1]==="/"&&(D=D.substring(0,D.length-1),S--),P=D,!N.isName(P)){let W;return W=D.trim().length===0?"Invalid space after '<'.":"Tag '"+D+"' is an invalid name.",d("InvalidTag",W,T(p,S))}const U=i(p,S);if(U===!1)return d("InvalidAttr","Attributes for '"+D+"' have open quote.",T(p,S));let R=U.value;if(S=U.index,R[R.length-1]==="/"){const W=S-R.length;R=R.substring(0,R.length-1);const J=o(R,y);if(J!==!0)return d(J.err.code,J.err.msg,T(p,W+J.err.line));m=!0}else if(z){if(!U.tagClosed)return d("InvalidTag","Closing tag '"+D+"' doesn't have proper closing.",T(p,S));if(R.trim().length>0)return d("InvalidTag","Closing tag '"+D+"' can't have attributes or invalid starting.",T(p,F));{const W=C.pop();if(D!==W.tagName){let J=T(p,W.tagStartPos);return d("InvalidTag","Expected closing tag '"+W.tagName+"' (opened in line "+J.line+", col "+J.col+") instead of closing tag '"+D+"'.",T(p,F))}C.length==0&&(_=!0)}}else{const W=o(R,y);if(W!==!0)return d(W.err.code,W.err.msg,T(p,S-R.length+W.err.line));if(_===!0)return d("InvalidXml","Multiple possible root nodes found.",T(p,S));y.unpairedTags.indexOf(D)!==-1||C.push({tagName:D,tagStartPos:F}),m=!0}for(S++;S<p.length;S++)if(p[S]==="<"){if(p[S+1]==="!"){S++,S=g(p,S);continue}if(p[S+1]!=="?")break;if(S=E(p,++S),S.err)return S}else if(p[S]==="&"){const W=c(p,S);if(W==-1)return d("InvalidChar","char '&' is not expected.",T(p,S));S=W}else if(_===!0&&!j(p[S]))return d("InvalidXml","Extra text at the end",T(p,S));p[S]==="<"&&S--}}}var P;return m?C.length==1?d("InvalidTag","Unclosed tag '"+C[0].tagName+"'.",T(p,C[0].tagStartPos)):!(C.length>0)||d("InvalidXml","Invalid '"+JSON.stringify(C.map(S=>S.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):d("InvalidXml","Start tag expected.",1)};const O='"',s="'";function i(p,y){let C="",m="",_=!1;for(;y<p.length;y++){if(p[y]===O||p[y]===s)m===""?m=p[y]:m!==p[y]||(m="");else if(p[y]===">"&&m===""){_=!0;break}C+=p[y]}return m===""&&{value:C,index:y,tagClosed:_}}const f=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function o(p,y){const C=N.getAllMatches(p,f),m={};for(let _=0;_<C.length;_++){if(C[_][1].length===0)return d("InvalidAttr","Attribute '"+C[_][2]+"' has no space in starting.",L(C[_]));if(C[_][3]!==void 0&&C[_][4]===void 0)return d("InvalidAttr","Attribute '"+C[_][2]+"' is without value.",L(C[_]));if(C[_][3]===void 0&&!y.allowBooleanAttributes)return d("InvalidAttr","boolean attribute '"+C[_][2]+"' is not allowed.",L(C[_]));const P=C[_][2];if(!w(P))return d("InvalidAttr","Attribute '"+P+"' is an invalid name.",L(C[_]));if(m.hasOwnProperty(P))return d("InvalidAttr","Attribute '"+P+"' is repeated.",L(C[_]));m[P]=1}return!0}function c(p,y){if(p[++y]===";")return-1;if(p[y]==="#")return function(m,_){let P=/\d/;for(m[_]==="x"&&(_++,P=/[\da-fA-F]/);_<m.length;_++){if(m[_]===";")return _;if(!m[_].match(P))break}return-1}(p,++y);let C=0;for(;y<p.length;y++,C++)if(!(p[y].match(/\w/)&&C<20)){if(p[y]===";")break;return-1}return y}function d(p,y,C){return{err:{code:p,msg:y,line:C.line||C,col:C.col}}}function w(p){return N.isName(p)}function T(p,y){const C=p.substring(0,y).split(/\r?\n/);return{line:C.length,col:C[C.length-1].length+1}}function L(p){return p.startIndex+p[1].length}},221:(u,h,v)=>{const N=v(87),x={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(s,i){return i},attributeValueProcessor:function(s,i){return i},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function j(s){this.options=Object.assign({},x,s),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=O),this.processTextOrObjNode=E,this.options.format?(this.indentate=g,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function E(s,i,f){const o=this.j2x(s,f+1);return s[this.options.textNodeName]!==void 0&&Object.keys(s).length===1?this.buildTextValNode(s[this.options.textNodeName],i,o.attrStr,f):this.buildObjectNode(o.val,i,o.attrStr,f)}function g(s){return this.options.indentBy.repeat(s)}function O(s){return!(!s.startsWith(this.options.attributeNamePrefix)||s===this.options.textNodeName)&&s.substr(this.attrPrefixLen)}j.prototype.build=function(s){return this.options.preserveOrder?N(s,this.options):(Array.isArray(s)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(s={[this.options.arrayNodeName]:s}),this.j2x(s,0).val)},j.prototype.j2x=function(s,i){let f="",o="";for(let c in s)if(s[c]===void 0)this.isAttribute(c)&&(o+="");else if(s[c]===null)this.isAttribute(c)?o+="":c[0]==="?"?o+=this.indentate(i)+"<"+c+"?"+this.tagEndChar:o+=this.indentate(i)+"<"+c+"/"+this.tagEndChar;else if(s[c]instanceof Date)o+=this.buildTextValNode(s[c],c,"",i);else if(typeof s[c]!="object"){const d=this.isAttribute(c);if(d)f+=this.buildAttrPairStr(d,""+s[c]);else if(c===this.options.textNodeName){let w=this.options.tagValueProcessor(c,""+s[c]);o+=this.replaceEntitiesValue(w)}else o+=this.buildTextValNode(s[c],c,"",i)}else if(Array.isArray(s[c])){const d=s[c].length;let w="";for(let T=0;T<d;T++){const L=s[c][T];L===void 0||(L===null?c[0]==="?"?o+=this.indentate(i)+"<"+c+"?"+this.tagEndChar:o+=this.indentate(i)+"<"+c+"/"+this.tagEndChar:typeof L=="object"?this.options.oneListGroup?w+=this.j2x(L,i+1).val:w+=this.processTextOrObjNode(L,c,i):w+=this.buildTextValNode(L,c,"",i))}this.options.oneListGroup&&(w=this.buildObjectNode(w,c,"",i)),o+=w}else if(this.options.attributesGroupName&&c===this.options.attributesGroupName){const d=Object.keys(s[c]),w=d.length;for(let T=0;T<w;T++)f+=this.buildAttrPairStr(d[T],""+s[c][d[T]])}else o+=this.processTextOrObjNode(s[c],c,i);return{attrStr:f,val:o}},j.prototype.buildAttrPairStr=function(s,i){return i=this.options.attributeValueProcessor(s,""+i),i=this.replaceEntitiesValue(i),this.options.suppressBooleanAttributes&&i==="true"?" "+s:" "+s+'="'+i+'"'},j.prototype.buildObjectNode=function(s,i,f,o){if(s==="")return i[0]==="?"?this.indentate(o)+"<"+i+f+"?"+this.tagEndChar:this.indentate(o)+"<"+i+f+this.closeTag(i)+this.tagEndChar;{let c="</"+i+this.tagEndChar,d="";return i[0]==="?"&&(d="?",c=""),!f&&f!==""||s.indexOf("<")!==-1?this.options.commentPropName!==!1&&i===this.options.commentPropName&&d.length===0?this.indentate(o)+"<!--".concat(s,"-->")+this.newLine:this.indentate(o)+"<"+i+f+d+this.tagEndChar+s+this.indentate(o)+c:this.indentate(o)+"<"+i+f+d+">"+s+c}},j.prototype.closeTag=function(s){let i="";return this.options.unpairedTags.indexOf(s)!==-1?this.options.suppressUnpairedNode||(i="/"):i=this.options.suppressEmptyNode?"/":"></".concat(s),i},j.prototype.buildTextValNode=function(s,i,f,o){if(this.options.cdataPropName!==!1&&i===this.options.cdataPropName)return this.indentate(o)+"<![CDATA[".concat(s,"]]>")+this.newLine;if(this.options.commentPropName!==!1&&i===this.options.commentPropName)return this.indentate(o)+"<!--".concat(s,"-->")+this.newLine;if(i[0]==="?")return this.indentate(o)+"<"+i+f+"?"+this.tagEndChar;{let c=this.options.tagValueProcessor(i,s);return c=this.replaceEntitiesValue(c),c===""?this.indentate(o)+"<"+i+f+this.closeTag(i)+this.tagEndChar:this.indentate(o)+"<"+i+f+">"+c+"</"+i+this.tagEndChar}},j.prototype.replaceEntitiesValue=function(s){if(s&&s.length>0&&this.options.processEntities)for(let i=0;i<this.options.entities.length;i++){const f=this.options.entities[i];s=s.replace(f.regex,f.val)}return s},u.exports=j},87:u=>{function h(E,g,O,s){let i="",f=!1;for(let o=0;o<E.length;o++){const c=E[o],d=v(c);let w="";if(w=O.length===0?d:"".concat(O,".").concat(d),d===g.textNodeName){let C=c[d];x(w,g)||(C=g.tagValueProcessor(d,C),C=j(C,g)),f&&(i+=s),i+=C,f=!1;continue}if(d===g.cdataPropName){f&&(i+=s),i+="<![CDATA[".concat(c[d][0][g.textNodeName],"]]>"),f=!1;continue}if(d===g.commentPropName){i+=s+"<!--".concat(c[d][0][g.textNodeName],"-->"),f=!0;continue}if(d[0]==="?"){const C=N(c[":@"],g),m=d==="?xml"?"":s;let _=c[d][0][g.textNodeName];_=_.length!==0?" "+_:"",i+=m+"<".concat(d).concat(_).concat(C,"?>"),f=!0;continue}let T=s;T!==""&&(T+=g.indentBy);const L=N(c[":@"],g),p=s+"<".concat(d).concat(L),y=h(c[d],g,w,T);g.unpairedTags.indexOf(d)!==-1?g.suppressUnpairedNode?i+=p+">":i+=p+"/>":y&&y.length!==0||!g.suppressEmptyNode?y&&y.endsWith(">")?i+=p+">".concat(y).concat(s,"</").concat(d,">"):(i+=p+">",y&&s!==""&&(y.includes("/>")||y.includes("</"))?i+=s+g.indentBy+y+s:i+=y,i+="</".concat(d,">")):i+=p+"/>",f=!0}return i}function v(E){const g=Object.keys(E);for(let O=0;O<g.length;O++){const s=g[O];if(s!==":@")return s}}function N(E,g){let O="";if(E&&!g.ignoreAttributes)for(let s in E){let i=g.attributeValueProcessor(s,E[s]);i=j(i,g),i===!0&&g.suppressBooleanAttributes?O+=" ".concat(s.substr(g.attributeNamePrefix.length)):O+=" ".concat(s.substr(g.attributeNamePrefix.length),'="').concat(i,'"')}return O}function x(E,g){let O=(E=E.substr(0,E.length-g.textNodeName.length-1)).substr(E.lastIndexOf(".")+1);for(let s in g.stopNodes)if(g.stopNodes[s]===E||g.stopNodes[s]==="*."+O)return!0;return!1}function j(E,g){if(E&&E.length>0&&g.processEntities)for(let O=0;O<g.entities.length;O++){const s=g.entities[O];E=E.replace(s.regex,s.val)}return E}u.exports=function(E,g){let O="";return g.format&&g.indentBy.length>0&&(O=`
`),h(E,g,"",O)}},193:(u,h,v)=>{const N=v(705);function x(f,o){let c="";for(;o<f.length&&f[o]!=="'"&&f[o]!=='"';o++)c+=f[o];if(c=c.trim(),c.indexOf(" ")!==-1)throw new Error("External entites are not supported");const d=f[o++];let w="";for(;o<f.length&&f[o]!==d;o++)w+=f[o];return[c,w,o]}function j(f,o){return f[o+1]==="!"&&f[o+2]==="-"&&f[o+3]==="-"}function E(f,o){return f[o+1]==="!"&&f[o+2]==="E"&&f[o+3]==="N"&&f[o+4]==="T"&&f[o+5]==="I"&&f[o+6]==="T"&&f[o+7]==="Y"}function g(f,o){return f[o+1]==="!"&&f[o+2]==="E"&&f[o+3]==="L"&&f[o+4]==="E"&&f[o+5]==="M"&&f[o+6]==="E"&&f[o+7]==="N"&&f[o+8]==="T"}function O(f,o){return f[o+1]==="!"&&f[o+2]==="A"&&f[o+3]==="T"&&f[o+4]==="T"&&f[o+5]==="L"&&f[o+6]==="I"&&f[o+7]==="S"&&f[o+8]==="T"}function s(f,o){return f[o+1]==="!"&&f[o+2]==="N"&&f[o+3]==="O"&&f[o+4]==="T"&&f[o+5]==="A"&&f[o+6]==="T"&&f[o+7]==="I"&&f[o+8]==="O"&&f[o+9]==="N"}function i(f){if(N.isName(f))return f;throw new Error("Invalid entity name ".concat(f))}u.exports=function(f,o){const c={};if(f[o+3]!=="O"||f[o+4]!=="C"||f[o+5]!=="T"||f[o+6]!=="Y"||f[o+7]!=="P"||f[o+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{o+=9;let d=1,w=!1,T=!1,L="";for(;o<f.length;o++)if(f[o]!=="<"||T)if(f[o]===">"){if(T?f[o-1]==="-"&&f[o-2]==="-"&&(T=!1,d--):d--,d===0)break}else f[o]==="["?w=!0:L+=f[o];else{if(w&&E(f,o))o+=7,[entityName,val,o]=x(f,o+1),val.indexOf("&")===-1&&(c[i(entityName)]={regx:RegExp("&".concat(entityName,";"),"g"),val});else if(w&&g(f,o))o+=8;else if(w&&O(f,o))o+=8;else if(w&&s(f,o))o+=9;else{if(!j)throw new Error("Invalid DOCTYPE");T=!0}d++,L=""}if(d!==0)throw new Error("Unclosed DOCTYPE")}return{entities:c,i:o}}},63:(u,h)=>{const v={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(N,x){return x},attributeValueProcessor:function(N,x){return x},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(N,x,j){return N}};h.buildOptions=function(N){return Object.assign({},v,N)},h.defaultOptions=v},299:(u,h,v)=>{const N=v(705),x=v(365),j=v(193),E=v(494);function g(m){const _=Object.keys(m);for(let P=0;P<_.length;P++){const S=_[P];this.lastEntities[S]={regex:new RegExp("&"+S+";","g"),val:m[S]}}}function O(m,_,P,S,F,z,D){if(m!==void 0&&(this.options.trimValues&&!S&&(m=m.trim()),m.length>0)){D||(m=this.replaceEntitiesValue(m));const U=this.options.tagValueProcessor(_,m,P,F,z);return U==null?m:typeof U!=typeof m||U!==m?U:this.options.trimValues||m.trim()===m?C(m,this.options.parseTagValue,this.options.numberParseOptions):m}}function s(m){if(this.options.removeNSPrefix){const _=m.split(":"),P=m.charAt(0)==="/"?"/":"";if(_[0]==="xmlns")return"";_.length===2&&(m=P+_[1])}return m}"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,N.nameRegexp);const i=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function f(m,_,P){if(!this.options.ignoreAttributes&&typeof m=="string"){const S=N.getAllMatches(m,i),F=S.length,z={};for(let D=0;D<F;D++){const U=this.resolveNameSpace(S[D][1]);let R=S[D][4],W=this.options.attributeNamePrefix+U;if(U.length)if(this.options.transformAttributeName&&(W=this.options.transformAttributeName(W)),W==="__proto__"&&(W="#__proto__"),R!==void 0){this.options.trimValues&&(R=R.trim()),R=this.replaceEntitiesValue(R);const J=this.options.attributeValueProcessor(U,R,_);z[W]=J==null?R:typeof J!=typeof R||J!==R?J:C(R,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(z[W]=!0)}if(!Object.keys(z).length)return;if(this.options.attributesGroupName){const D={};return D[this.options.attributesGroupName]=z,D}return z}}const o=function(m){m=m.replace(/\r\n?/g,`
`);const _=new x("!xml");let P=_,S="",F="";for(let z=0;z<m.length;z++)if(m[z]==="<")if(m[z+1]==="/"){const D=L(m,">",z,"Closing Tag is not closed.");let U=m.substring(z+2,D).trim();if(this.options.removeNSPrefix){const J=U.indexOf(":");J!==-1&&(U=U.substr(J+1))}this.options.transformTagName&&(U=this.options.transformTagName(U)),P&&(S=this.saveTextToParentTag(S,P,F));const R=F.substring(F.lastIndexOf(".")+1);if(U&&this.options.unpairedTags.indexOf(U)!==-1)throw new Error("Unpaired tag can not be used as closing tag: </".concat(U,">"));let W=0;R&&this.options.unpairedTags.indexOf(R)!==-1?(W=F.lastIndexOf(".",F.lastIndexOf(".")-1),this.tagsNodeStack.pop()):W=F.lastIndexOf("."),F=F.substring(0,W),P=this.tagsNodeStack.pop(),S="",z=D}else if(m[z+1]==="?"){let D=p(m,z,!1,"?>");if(!D)throw new Error("Pi Tag is not closed.");if(S=this.saveTextToParentTag(S,P,F),!(this.options.ignoreDeclaration&&D.tagName==="?xml"||this.options.ignorePiTags)){const U=new x(D.tagName);U.add(this.options.textNodeName,""),D.tagName!==D.tagExp&&D.attrExpPresent&&(U[":@"]=this.buildAttributesMap(D.tagExp,F,D.tagName)),this.addChild(P,U,F)}z=D.closeIndex+1}else if(m.substr(z+1,3)==="!--"){const D=L(m,"-->",z+4,"Comment is not closed.");if(this.options.commentPropName){const U=m.substring(z+4,D-2);S=this.saveTextToParentTag(S,P,F),P.add(this.options.commentPropName,[{[this.options.textNodeName]:U}])}z=D}else if(m.substr(z+1,2)==="!D"){const D=j(m,z);this.docTypeEntities=D.entities,z=D.i}else if(m.substr(z+1,2)==="!["){const D=L(m,"]]>",z,"CDATA is not closed.")-2,U=m.substring(z+9,D);if(S=this.saveTextToParentTag(S,P,F),this.options.cdataPropName)P.add(this.options.cdataPropName,[{[this.options.textNodeName]:U}]);else{let R=this.parseTextData(U,P.tagname,F,!0,!1,!0);R==null&&(R=""),P.add(this.options.textNodeName,R)}z=D+2}else{let D=p(m,z,this.options.removeNSPrefix),U=D.tagName,R=D.tagExp,W=D.attrExpPresent,J=D.closeIndex;this.options.transformTagName&&(U=this.options.transformTagName(U)),P&&S&&P.tagname!=="!xml"&&(S=this.saveTextToParentTag(S,P,F,!1));const ut=P;if(ut&&this.options.unpairedTags.indexOf(ut.tagname)!==-1&&(P=this.tagsNodeStack.pop(),F=F.substring(0,F.lastIndexOf("."))),U!==_.tagname&&(F+=F?"."+U:U),this.isItStopNode(this.options.stopNodes,F,U)){let Y="";if(R.length>0&&R.lastIndexOf("/")===R.length-1)z=D.closeIndex;else if(this.options.unpairedTags.indexOf(U)!==-1)z=D.closeIndex;else{const rt=this.readStopNodeData(m,U,J+1);if(!rt)throw new Error("Unexpected end of ".concat(U));z=rt.i,Y=rt.tagContent}const et=new x(U);U!==R&&W&&(et[":@"]=this.buildAttributesMap(R,F,U)),Y&&(Y=this.parseTextData(Y,U,F,!0,W,!0,!0)),F=F.substr(0,F.lastIndexOf(".")),et.add(this.options.textNodeName,Y),this.addChild(P,et,F)}else{if(R.length>0&&R.lastIndexOf("/")===R.length-1){U[U.length-1]==="/"?(U=U.substr(0,U.length-1),F=F.substr(0,F.length-1),R=U):R=R.substr(0,R.length-1),this.options.transformTagName&&(U=this.options.transformTagName(U));const Y=new x(U);U!==R&&W&&(Y[":@"]=this.buildAttributesMap(R,F,U)),this.addChild(P,Y,F),F=F.substr(0,F.lastIndexOf("."))}else{const Y=new x(U);this.tagsNodeStack.push(P),U!==R&&W&&(Y[":@"]=this.buildAttributesMap(R,F,U)),this.addChild(P,Y,F),P=Y}S="",z=J}}else S+=m[z];return _.child};function c(m,_,P){const S=this.options.updateTag(_.tagname,P,_[":@"]);S===!1||(typeof S=="string"&&(_.tagname=S),m.addChild(_))}const d=function(m){if(this.options.processEntities){for(let _ in this.docTypeEntities){const P=this.docTypeEntities[_];m=m.replace(P.regx,P.val)}for(let _ in this.lastEntities){const P=this.lastEntities[_];m=m.replace(P.regex,P.val)}if(this.options.htmlEntities)for(let _ in this.htmlEntities){const P=this.htmlEntities[_];m=m.replace(P.regex,P.val)}m=m.replace(this.ampEntity.regex,this.ampEntity.val)}return m};function w(m,_,P,S){return m&&(S===void 0&&(S=Object.keys(_.child).length===0),(m=this.parseTextData(m,_.tagname,P,!1,!!_[":@"]&&Object.keys(_[":@"]).length!==0,S))!==void 0&&m!==""&&_.add(this.options.textNodeName,m),m=""),m}function T(m,_,P){const S="*."+P;for(const F in m){const z=m[F];if(S===z||_===z)return!0}return!1}function L(m,_,P,S){const F=m.indexOf(_,P);if(F===-1)throw new Error(S);return F+_.length-1}function p(m,_,P){const S=function(W,J){let ut,Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:">",et="";for(let rt=J;rt<W.length;rt++){let ct=W[rt];if(ut)ct===ut&&(ut="");else if(ct==='"'||ct==="'")ut=ct;else if(ct===Y[0]){if(!Y[1])return{data:et,index:rt};if(W[rt+1]===Y[1])return{data:et,index:rt}}else ct==="	"&&(ct=" ");et+=ct}}(m,_+1,arguments.length>3&&arguments[3]!==void 0?arguments[3]:">");if(!S)return;let F=S.data;const z=S.index,D=F.search(/\s/);let U=F,R=!0;if(D!==-1&&(U=F.substr(0,D).replace(/\s\s*$/,""),F=F.substr(D+1)),P){const W=U.indexOf(":");W!==-1&&(U=U.substr(W+1),R=U!==S.data.substr(W+1))}return{tagName:U,tagExp:F,closeIndex:z,attrExpPresent:R}}function y(m,_,P){const S=P;let F=1;for(;P<m.length;P++)if(m[P]==="<")if(m[P+1]==="/"){const z=L(m,">",P,"".concat(_," is not closed"));if(m.substring(P+2,z).trim()===_&&(F--,F===0))return{tagContent:m.substring(S,P),i:z};P=z}else if(m[P+1]==="?")P=L(m,"?>",P+1,"StopNode is not closed.");else if(m.substr(P+1,3)==="!--")P=L(m,"-->",P+3,"StopNode is not closed.");else if(m.substr(P+1,2)==="![")P=L(m,"]]>",P,"StopNode is not closed.")-2;else{const z=p(m,P,">");z&&((z&&z.tagName)===_&&z.tagExp[z.tagExp.length-1]!=="/"&&F++,P=z.closeIndex)}}function C(m,_,P){if(_&&typeof m=="string"){const S=m.trim();return S==="true"||S!=="false"&&E(m,P)}return N.isExist(m)?m:""}u.exports=class{constructor(m){this.options=m,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=g,this.parseXml=o,this.parseTextData=O,this.resolveNameSpace=s,this.buildAttributesMap=f,this.isItStopNode=T,this.replaceEntitiesValue=d,this.readStopNodeData=y,this.saveTextToParentTag=w,this.addChild=c}}},338:(u,h,v)=>{const{buildOptions:N}=v(63),x=v(299),{prettify:j}=v(728),E=v(31);u.exports=class{constructor(g){this.externalEntities={},this.options=N(g)}parse(g,O){if(typeof g!="string"){if(!g.toString)throw new Error("XML data is accepted in String or Bytes[] form.");g=g.toString()}if(O){O===!0&&(O={});const f=E.validate(g,O);if(f!==!0)throw Error("".concat(f.err.msg,":").concat(f.err.line,":").concat(f.err.col))}const s=new x(this.options);s.addExternalEntities(this.externalEntities);const i=s.parseXml(g);return this.options.preserveOrder||i===void 0?i:j(i,this.options)}addEntity(g,O){if(O.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(g.indexOf("&")!==-1||g.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(O==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[g]=O}}},728:(u,h)=>{function v(E,g,O){let s;const i={};for(let f=0;f<E.length;f++){const o=E[f],c=N(o);let d="";if(d=O===void 0?c:O+"."+c,c===g.textNodeName)s===void 0?s=o[c]:s+=""+o[c];else{if(c===void 0)continue;if(o[c]){let w=v(o[c],g,d);const T=j(w,g);o[":@"]?x(w,o[":@"],d,g):Object.keys(w).length!==1||w[g.textNodeName]===void 0||g.alwaysCreateTextNode?Object.keys(w).length===0&&(g.alwaysCreateTextNode?w[g.textNodeName]="":w=""):w=w[g.textNodeName],i[c]!==void 0&&i.hasOwnProperty(c)?(Array.isArray(i[c])||(i[c]=[i[c]]),i[c].push(w)):g.isArray(c,d,T)?i[c]=[w]:i[c]=w}}}return typeof s=="string"?s.length>0&&(i[g.textNodeName]=s):s!==void 0&&(i[g.textNodeName]=s),i}function N(E){const g=Object.keys(E);for(let O=0;O<g.length;O++){const s=g[O];if(s!==":@")return s}}function x(E,g,O,s){if(g){const i=Object.keys(g),f=i.length;for(let o=0;o<f;o++){const c=i[o];s.isArray(c,O+"."+c,!0,!0)?E[c]=[g[c]]:E[c]=g[c]}}}function j(E,g){const{textNodeName:O}=g,s=Object.keys(E).length;return s===0||!(s!==1||!E[O]&&typeof E[O]!="boolean"&&E[O]!==0)}h.prettify=function(E,g){return v(E,g)}},365:u=>{u.exports=class{constructor(h){this.tagname=h,this.child=[],this[":@"]={}}add(h,v){h==="__proto__"&&(h="#__proto__"),this.child.push({[h]:v})}addChild(h){h.tagname==="__proto__"&&(h.tagname="#__proto__"),h[":@"]&&Object.keys(h[":@"]).length>0?this.child.push({[h.tagname]:h.child,":@":h[":@"]}):this.child.push({[h.tagname]:h.child})}}},135:u=>{function h(v){return!!v.constructor&&typeof v.constructor.isBuffer=="function"&&v.constructor.isBuffer(v)}u.exports=function(v){return v!=null&&(h(v)||function(N){return typeof N.readFloatLE=="function"&&typeof N.slice=="function"&&h(N.slice(0,0))}(v)||!!v._isBuffer)}},542:(u,h,v)=>{var N,x,j,E,g;N=v(298),x=v(526).utf8,j=v(135),E=v(526).bin,(g=function(O,s){O.constructor==String?O=s&&s.encoding==="binary"?E.stringToBytes(O):x.stringToBytes(O):j(O)?O=Array.prototype.slice.call(O,0):Array.isArray(O)||O.constructor===Uint8Array||(O=O.toString());for(var i=N.bytesToWords(O),f=8*O.length,o=1732584193,c=-271733879,d=-1732584194,w=271733878,T=0;T<i.length;T++)i[T]=16711935&(i[T]<<8|i[T]>>>24)|4278255360&(i[T]<<24|i[T]>>>8);i[f>>>5]|=128<<f%32,i[14+(f+64>>>9<<4)]=f;var L=g._ff,p=g._gg,y=g._hh,C=g._ii;for(T=0;T<i.length;T+=16){var m=o,_=c,P=d,S=w;o=L(o,c,d,w,i[T+0],7,-680876936),w=L(w,o,c,d,i[T+1],12,-389564586),d=L(d,w,o,c,i[T+2],17,606105819),c=L(c,d,w,o,i[T+3],22,-1044525330),o=L(o,c,d,w,i[T+4],7,-176418897),w=L(w,o,c,d,i[T+5],12,1200080426),d=L(d,w,o,c,i[T+6],17,-1473231341),c=L(c,d,w,o,i[T+7],22,-45705983),o=L(o,c,d,w,i[T+8],7,1770035416),w=L(w,o,c,d,i[T+9],12,-1958414417),d=L(d,w,o,c,i[T+10],17,-42063),c=L(c,d,w,o,i[T+11],22,-1990404162),o=L(o,c,d,w,i[T+12],7,1804603682),w=L(w,o,c,d,i[T+13],12,-40341101),d=L(d,w,o,c,i[T+14],17,-1502002290),o=p(o,c=L(c,d,w,o,i[T+15],22,1236535329),d,w,i[T+1],5,-165796510),w=p(w,o,c,d,i[T+6],9,-1069501632),d=p(d,w,o,c,i[T+11],14,643717713),c=p(c,d,w,o,i[T+0],20,-373897302),o=p(o,c,d,w,i[T+5],5,-701558691),w=p(w,o,c,d,i[T+10],9,38016083),d=p(d,w,o,c,i[T+15],14,-660478335),c=p(c,d,w,o,i[T+4],20,-405537848),o=p(o,c,d,w,i[T+9],5,568446438),w=p(w,o,c,d,i[T+14],9,-1019803690),d=p(d,w,o,c,i[T+3],14,-187363961),c=p(c,d,w,o,i[T+8],20,1163531501),o=p(o,c,d,w,i[T+13],5,-1444681467),w=p(w,o,c,d,i[T+2],9,-51403784),d=p(d,w,o,c,i[T+7],14,1735328473),o=y(o,c=p(c,d,w,o,i[T+12],20,-1926607734),d,w,i[T+5],4,-378558),w=y(w,o,c,d,i[T+8],11,-2022574463),d=y(d,w,o,c,i[T+11],16,1839030562),c=y(c,d,w,o,i[T+14],23,-35309556),o=y(o,c,d,w,i[T+1],4,-1530992060),w=y(w,o,c,d,i[T+4],11,1272893353),d=y(d,w,o,c,i[T+7],16,-155497632),c=y(c,d,w,o,i[T+10],23,-1094730640),o=y(o,c,d,w,i[T+13],4,681279174),w=y(w,o,c,d,i[T+0],11,-358537222),d=y(d,w,o,c,i[T+3],16,-722521979),c=y(c,d,w,o,i[T+6],23,76029189),o=y(o,c,d,w,i[T+9],4,-640364487),w=y(w,o,c,d,i[T+12],11,-421815835),d=y(d,w,o,c,i[T+15],16,530742520),o=C(o,c=y(c,d,w,o,i[T+2],23,-995338651),d,w,i[T+0],6,-198630844),w=C(w,o,c,d,i[T+7],10,1126891415),d=C(d,w,o,c,i[T+14],15,-1416354905),c=C(c,d,w,o,i[T+5],21,-57434055),o=C(o,c,d,w,i[T+12],6,1700485571),w=C(w,o,c,d,i[T+3],10,-1894986606),d=C(d,w,o,c,i[T+10],15,-1051523),c=C(c,d,w,o,i[T+1],21,-2054922799),o=C(o,c,d,w,i[T+8],6,1873313359),w=C(w,o,c,d,i[T+15],10,-30611744),d=C(d,w,o,c,i[T+6],15,-1560198380),c=C(c,d,w,o,i[T+13],21,1309151649),o=C(o,c,d,w,i[T+4],6,-145523070),w=C(w,o,c,d,i[T+11],10,-1120210379),d=C(d,w,o,c,i[T+2],15,718787259),c=C(c,d,w,o,i[T+9],21,-343485551),o=o+m>>>0,c=c+_>>>0,d=d+P>>>0,w=w+S>>>0}return N.endian([o,c,d,w])})._ff=function(O,s,i,f,o,c,d){var w=O+(s&i|~s&f)+(o>>>0)+d;return(w<<c|w>>>32-c)+s},g._gg=function(O,s,i,f,o,c,d){var w=O+(s&f|i&~f)+(o>>>0)+d;return(w<<c|w>>>32-c)+s},g._hh=function(O,s,i,f,o,c,d){var w=O+(s^i^f)+(o>>>0)+d;return(w<<c|w>>>32-c)+s},g._ii=function(O,s,i,f,o,c,d){var w=O+(i^(s|~f))+(o>>>0)+d;return(w<<c|w>>>32-c)+s},g._blocksize=16,g._digestsize=16,u.exports=function(O,s){if(O==null)throw new Error("Illegal argument "+O);var i=N.wordsToBytes(g(O,s));return s&&s.asBytes?i:s&&s.asString?E.bytesToString(i):N.bytesToHex(i)}},285:(u,h,v)=>{var N=v(2);u.exports=function(L){return L?(L.substr(0,2)==="{}"&&(L="\\{\\}"+L.substr(2)),T(function(p){return p.split("\\\\").join(x).split("\\{").join(j).split("\\}").join(E).split("\\,").join(g).split("\\.").join(O)}(L),!0).map(i)):[]};var x="\0SLASH"+Math.random()+"\0",j="\0OPEN"+Math.random()+"\0",E="\0CLOSE"+Math.random()+"\0",g="\0COMMA"+Math.random()+"\0",O="\0PERIOD"+Math.random()+"\0";function s(L){return parseInt(L,10)==L?parseInt(L,10):L.charCodeAt(0)}function i(L){return L.split(x).join("\\").split(j).join("{").split(E).join("}").split(g).join(",").split(O).join(".")}function f(L){if(!L)return[""];var p=[],y=N("{","}",L);if(!y)return L.split(",");var C=y.pre,m=y.body,_=y.post,P=C.split(",");P[P.length-1]+="{"+m+"}";var S=f(_);return _.length&&(P[P.length-1]+=S.shift(),P.push.apply(P,S)),p.push.apply(p,P),p}function o(L){return"{"+L+"}"}function c(L){return/^-?0\d/.test(L)}function d(L,p){return L<=p}function w(L,p){return L>=p}function T(L,p){var y=[],C=N("{","}",L);if(!C)return[L];var m=C.pre,_=C.post.length?T(C.post,!1):[""];if(/\$$/.test(C.pre))for(var P=0;P<_.length;P++){var S=m+"{"+C.body+"}"+_[P];y.push(S)}else{var F,z,D=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(C.body),U=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(C.body),R=D||U,W=C.body.indexOf(",")>=0;if(!R&&!W)return C.post.match(/,.*\}/)?T(L=C.pre+"{"+C.body+E+C.post):[L];if(R)F=C.body.split(/\.\./);else if((F=f(C.body)).length===1&&(F=T(F[0],!1).map(o)).length===1)return _.map(function(Qt){return C.pre+F[0]+Qt});if(R){var J=s(F[0]),ut=s(F[1]),Y=Math.max(F[0].length,F[1].length),et=F.length==3?Math.abs(s(F[2])):1,rt=d;ut<J&&(et*=-1,rt=w);var ct=F.some(c);z=[];for(var vt=J;rt(vt,ut);vt+=et){var bt;if(U)(bt=String.fromCharCode(vt))==="\\"&&(bt="");else if(bt=String(vt),ct){var Mt=Y-bt.length;if(Mt>0){var Pt=new Array(Mt+1).join("0");bt=vt<0?"-"+Pt+bt.slice(1):Pt+bt}}z.push(bt)}}else{z=[];for(var Nt=0;Nt<F.length;Nt++)z.push.apply(z,T(F[Nt],!1))}for(Nt=0;Nt<z.length;Nt++)for(P=0;P<_.length;P++)S=m+z[Nt]+_[P],(!p||R||S)&&y.push(S)}return y}},829:u=>{function h(s){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},h(s)}function v(s){var i=typeof Map=="function"?new Map:void 0;return v=function(f){if(f===null||(o=f,Function.toString.call(o).indexOf("[native code]")===-1))return f;var o;if(typeof f!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(f))return i.get(f);i.set(f,c)}function c(){return N(f,arguments,j(this).constructor)}return c.prototype=Object.create(f.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),x(c,f)},v(s)}function N(s,i,f){return N=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(o,c,d){var w=[null];w.push.apply(w,c);var T=new(Function.bind.apply(o,w));return d&&x(T,d.prototype),T},N.apply(null,arguments)}function x(s,i){return x=Object.setPrototypeOf||function(f,o){return f.__proto__=o,f},x(s,i)}function j(s){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},j(s)}var E=function(s){function i(f){var o;return function(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}(this,i),(o=function(c,d){return!d||h(d)!=="object"&&typeof d!="function"?function(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(c):d}(this,j(i).call(this,f))).name="ObjectPrototypeMutationError",o}return function(f,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(o&&o.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),o&&x(f,o)}(i,s),i}(v(Error));function g(s,i){for(var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},o=i.split("."),c=o.length,d=function(L){var p=o[L];if(!s)return{v:void 0};if(p==="+"){if(Array.isArray(s))return{v:s.map(function(C,m){var _=o.slice(L+1);return _.length>0?g(C,_.join("."),f):f(s,m,o,L)})};var y=o.slice(0,L).join(".");throw new Error("Object at wildcard (".concat(y,") is not an array"))}s=f(s,p,o,L)},w=0;w<c;w++){var T=d(w);if(h(T)==="object")return T.v}return s}function O(s,i){return s.length===i+1}u.exports={set:function(s,i,f){if(h(s)!="object"||s===null||i===void 0)return s;if(typeof i=="number")return s[i]=f,s[i];try{return g(s,i,function(o,c,d,w){if(o===Reflect.getPrototypeOf({}))throw new E("Attempting to mutate Object.prototype");if(!o[c]){var T=Number.isInteger(Number(d[w+1])),L=d[w+1]==="+";o[c]=T||L?[]:{}}return O(d,w)&&(o[c]=f),o[c]})}catch(o){if(o instanceof E)throw o;return s}},get:function(s,i){if(h(s)!="object"||s===null||i===void 0)return s;if(typeof i=="number")return s[i];try{return g(s,i,function(f,o){return f[o]})}catch{return s}},has:function(s,i){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(h(s)!="object"||s===null||i===void 0)return!1;if(typeof i=="number")return i in s;try{var o=!1;return g(s,i,function(c,d,w,T){if(!O(w,T))return c&&c[d];o=f.own?c.hasOwnProperty(d):d in c}),o}catch{return!1}},hasOwn:function(s,i,f){return this.has(s,i,f||{own:!0})},isIn:function(s,i,f){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(h(s)!="object"||s===null||i===void 0)return!1;try{var c=!1,d=!1;return g(s,i,function(w,T,L,p){return c=c||w===f||!!w&&w[T]===f,d=O(L,p)&&h(w)==="object"&&T in w,w&&w[T]}),o.validPath?c&&d:c}catch{return!1}},ObjectPrototypeMutationError:E}},47:(u,h,v)=>{var N=v(410),x=function(s){return typeof s=="string"};function j(s,i){for(var f=[],o=0;o<s.length;o++){var c=s[o];c&&c!=="."&&(c===".."?f.length&&f[f.length-1]!==".."?f.pop():i&&f.push(".."):f.push(c))}return f}var E=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,g={};function O(s){return E.exec(s).slice(1)}g.resolve=function(){for(var s="",i=!1,f=arguments.length-1;f>=-1&&!i;f--){var o=f>=0?arguments[f]:Xt.cwd();if(!x(o))throw new TypeError("Arguments to path.resolve must be strings");o&&(s=o+"/"+s,i=o.charAt(0)==="/")}return(i?"/":"")+(s=j(s.split("/"),!i).join("/"))||"."},g.normalize=function(s){var i=g.isAbsolute(s),f=s.substr(-1)==="/";return(s=j(s.split("/"),!i).join("/"))||i||(s="."),s&&f&&(s+="/"),(i?"/":"")+s},g.isAbsolute=function(s){return s.charAt(0)==="/"},g.join=function(){for(var s="",i=0;i<arguments.length;i++){var f=arguments[i];if(!x(f))throw new TypeError("Arguments to path.join must be strings");f&&(s+=s?"/"+f:f)}return g.normalize(s)},g.relative=function(s,i){function f(p){for(var y=0;y<p.length&&p[y]==="";y++);for(var C=p.length-1;C>=0&&p[C]==="";C--);return y>C?[]:p.slice(y,C+1)}s=g.resolve(s).substr(1),i=g.resolve(i).substr(1);for(var o=f(s.split("/")),c=f(i.split("/")),d=Math.min(o.length,c.length),w=d,T=0;T<d;T++)if(o[T]!==c[T]){w=T;break}var L=[];for(T=w;T<o.length;T++)L.push("..");return(L=L.concat(c.slice(w))).join("/")},g._makeLong=function(s){return s},g.dirname=function(s){var i=O(s),f=i[0],o=i[1];return f||o?(o&&(o=o.substr(0,o.length-1)),f+o):"."},g.basename=function(s,i){var f=O(s)[2];return i&&f.substr(-1*i.length)===i&&(f=f.substr(0,f.length-i.length)),f},g.extname=function(s){return O(s)[3]},g.format=function(s){if(!N.isObject(s))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof s);var i=s.root||"";if(!x(i))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof s.root);return(s.dir?s.dir+g.sep:"")+(s.base||"")},g.parse=function(s){if(!x(s))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof s);var i=O(s);if(!i||i.length!==4)throw new TypeError("Invalid path '"+s+"'");return i[1]=i[1]||"",i[2]=i[2]||"",i[3]=i[3]||"",{root:i[0],dir:i[0]+i[1].slice(0,i[1].length-1),base:i[2],ext:i[3],name:i[2].slice(0,i[2].length-i[3].length)}},g.sep="/",g.delimiter=":",u.exports=g},647:(u,h)=>{var v=Object.prototype.hasOwnProperty;function N(j){try{return decodeURIComponent(j.replace(/\+/g," "))}catch{return null}}function x(j){try{return encodeURIComponent(j)}catch{return null}}h.stringify=function(j,E){E=E||"";var g,O,s=[];for(O in typeof E!="string"&&(E="?"),j)if(v.call(j,O)){if((g=j[O])||g!=null&&!isNaN(g)||(g=""),O=x(O),g=x(g),O===null||g===null)continue;s.push(O+"="+g)}return s.length?E+s.join("&"):""},h.parse=function(j){for(var E,g=/([^=?#&]+)=?([^&]*)/g,O={};E=g.exec(j);){var s=N(E[1]),i=N(E[2]);s===null||i===null||s in O||(O[s]=i)}return O}},670:u=>{u.exports=function(h,v){if(v=v.split(":")[0],!(h=+h))return!1;switch(v){case"http":case"ws":return h!==80;case"https":case"wss":return h!==443;case"ftp":return h!==21;case"gopher":return h!==70;case"file":return!1}return h!==0}},494:u=>{const h=/^[-+]?0x[a-fA-F0-9]+$/,v=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const N={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};u.exports=function(x){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(j=Object.assign({},N,j),!x||typeof x!="string")return x;let E=x.trim();if(j.skipLike!==void 0&&j.skipLike.test(E))return x;if(j.hex&&h.test(E))return Number.parseInt(E,16);{const O=v.exec(E);if(O){const s=O[1],i=O[2];let f=((g=O[3])&&g.indexOf(".")!==-1&&((g=g.replace(/0+$/,""))==="."?g="0":g[0]==="."?g="0"+g:g[g.length-1]==="."&&(g=g.substr(0,g.length-1))),g);const o=O[4]||O[6];if(!j.leadingZeros&&i.length>0&&s&&E[2]!=="."||!j.leadingZeros&&i.length>0&&!s&&E[1]!==".")return x;{const c=Number(E),d=""+c;return d.search(/[eE]/)!==-1||o?j.eNotation?c:x:E.indexOf(".")!==-1?d==="0"&&f===""||d===f||s&&d==="-"+f?c:x:i?f===d||s+f===d?c:x:E===d||E===s+d?c:x}}return x}var g}},737:(u,h,v)=>{var N=v(670),x=v(647),j=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,E=/[\n\r\t]/g,g=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,O=/:\d+$/,s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,i=/^[a-zA-Z]:/;function f(p){return(p||"").toString().replace(j,"")}var o=[["#","hash"],["?","query"],function(p,y){return w(y.protocol)?p.replace(/\\/g,"/"):p},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],c={hash:1,query:1};function d(p){var y,C=(typeof window<"u"?window:typeof Wt<"u"?Wt:typeof self<"u"?self:{}).location||{},m={},_=typeof(p=p||C);if(p.protocol==="blob:")m=new L(unescape(p.pathname),{});else if(_==="string")for(y in m=new L(p,{}),c)delete m[y];else if(_==="object"){for(y in p)y in c||(m[y]=p[y]);m.slashes===void 0&&(m.slashes=g.test(p.href))}return m}function w(p){return p==="file:"||p==="ftp:"||p==="http:"||p==="https:"||p==="ws:"||p==="wss:"}function T(p,y){p=(p=f(p)).replace(E,""),y=y||{};var C,m=s.exec(p),_=m[1]?m[1].toLowerCase():"",P=!!m[2],S=!!m[3],F=0;return P?S?(C=m[2]+m[3]+m[4],F=m[2].length+m[3].length):(C=m[2]+m[4],F=m[2].length):S?(C=m[3]+m[4],F=m[3].length):C=m[4],_==="file:"?F>=2&&(C=C.slice(2)):w(_)?C=m[4]:_?P&&(C=C.slice(2)):F>=2&&w(y.protocol)&&(C=m[4]),{protocol:_,slashes:P||w(_),slashesCount:F,rest:C}}function L(p,y,C){if(p=(p=f(p)).replace(E,""),!(this instanceof L))return new L(p,y,C);var m,_,P,S,F,z,D=o.slice(),U=typeof y,R=this,W=0;for(U!=="object"&&U!=="string"&&(C=y,y=null),C&&typeof C!="function"&&(C=x.parse),m=!(_=T(p||"",y=d(y))).protocol&&!_.slashes,R.slashes=_.slashes||m&&y.slashes,R.protocol=_.protocol||y.protocol||"",p=_.rest,(_.protocol==="file:"&&(_.slashesCount!==2||i.test(p))||!_.slashes&&(_.protocol||_.slashesCount<2||!w(R.protocol)))&&(D[3]=[/(.*)/,"pathname"]);W<D.length;W++)typeof(S=D[W])!="function"?(P=S[0],z=S[1],P!=P?R[z]=p:typeof P=="string"?~(F=P==="@"?p.lastIndexOf(P):p.indexOf(P))&&(typeof S[2]=="number"?(R[z]=p.slice(0,F),p=p.slice(F+S[2])):(R[z]=p.slice(F),p=p.slice(0,F))):(F=P.exec(p))&&(R[z]=F[1],p=p.slice(0,F.index)),R[z]=R[z]||m&&S[3]&&y[z]||"",S[4]&&(R[z]=R[z].toLowerCase())):p=S(p,R);C&&(R.query=C(R.query)),m&&y.slashes&&R.pathname.charAt(0)!=="/"&&(R.pathname!==""||y.pathname!=="")&&(R.pathname=function(J,ut){if(J==="")return ut;for(var Y=(ut||"/").split("/").slice(0,-1).concat(J.split("/")),et=Y.length,rt=Y[et-1],ct=!1,vt=0;et--;)Y[et]==="."?Y.splice(et,1):Y[et]===".."?(Y.splice(et,1),vt++):vt&&(et===0&&(ct=!0),Y.splice(et,1),vt--);return ct&&Y.unshift(""),rt!=="."&&rt!==".."||Y.push(""),Y.join("/")}(R.pathname,y.pathname)),R.pathname.charAt(0)!=="/"&&w(R.protocol)&&(R.pathname="/"+R.pathname),N(R.port,R.protocol)||(R.host=R.hostname,R.port=""),R.username=R.password="",R.auth&&(~(F=R.auth.indexOf(":"))?(R.username=R.auth.slice(0,F),R.username=encodeURIComponent(decodeURIComponent(R.username)),R.password=R.auth.slice(F+1),R.password=encodeURIComponent(decodeURIComponent(R.password))):R.username=encodeURIComponent(decodeURIComponent(R.auth)),R.auth=R.password?R.username+":"+R.password:R.username),R.origin=R.protocol!=="file:"&&w(R.protocol)&&R.host?R.protocol+"//"+R.host:"null",R.href=R.toString()}L.prototype={set:function(p,y,C){var m=this;switch(p){case"query":typeof y=="string"&&y.length&&(y=(C||x.parse)(y)),m[p]=y;break;case"port":m[p]=y,N(y,m.protocol)?y&&(m.host=m.hostname+":"+y):(m.host=m.hostname,m[p]="");break;case"hostname":m[p]=y,m.port&&(y+=":"+m.port),m.host=y;break;case"host":m[p]=y,O.test(y)?(y=y.split(":"),m.port=y.pop(),m.hostname=y.join(":")):(m.hostname=y,m.port="");break;case"protocol":m.protocol=y.toLowerCase(),m.slashes=!C;break;case"pathname":case"hash":if(y){var _=p==="pathname"?"/":"#";m[p]=y.charAt(0)!==_?_+y:y}else m[p]=y;break;case"username":case"password":m[p]=encodeURIComponent(y);break;case"auth":var P=y.indexOf(":");~P?(m.username=y.slice(0,P),m.username=encodeURIComponent(decodeURIComponent(m.username)),m.password=y.slice(P+1),m.password=encodeURIComponent(decodeURIComponent(m.password))):m.username=encodeURIComponent(decodeURIComponent(y))}for(var S=0;S<o.length;S++){var F=o[S];F[4]&&(m[F[1]]=m[F[1]].toLowerCase())}return m.auth=m.password?m.username+":"+m.password:m.username,m.origin=m.protocol!=="file:"&&w(m.protocol)&&m.host?m.protocol+"//"+m.host:"null",m.href=m.toString(),m},toString:function(p){p&&typeof p=="function"||(p=x.stringify);var y,C=this,m=C.host,_=C.protocol;_&&_.charAt(_.length-1)!==":"&&(_+=":");var P=_+(C.protocol&&C.slashes||w(C.protocol)?"//":"");return C.username?(P+=C.username,C.password&&(P+=":"+C.password),P+="@"):C.password?(P+=":"+C.password,P+="@"):C.protocol!=="file:"&&w(C.protocol)&&!m&&C.pathname!=="/"&&(P+="@"),(m[m.length-1]===":"||O.test(C.hostname)&&!C.port)&&(m+=":"),P+=m+C.pathname,(y=typeof C.query=="object"?p(C.query):C.query)&&(P+=y.charAt(0)!=="?"?"?"+y:y),C.hash&&(P+=C.hash),P}},L.extractProtocol=T,L.location=d,L.trimLeft=f,L.qs=x,u.exports=L},410:()=>{},388:()=>{},805:()=>{},345:()=>{},800:()=>{}},en={};function tt(u){var h=en[u];if(h!==void 0)return h.exports;var v=en[u]={id:u,loaded:!1,exports:{}};return Ar[u].call(v.exports,v,v.exports,tt),v.loaded=!0,v.exports}tt.n=u=>{var h=u&&u.__esModule?()=>u.default:()=>u;return tt.d(h,{a:h}),h},tt.d=(u,h)=>{for(var v in h)tt.o(h,v)&&!tt.o(u,v)&&Object.defineProperty(u,v,{enumerable:!0,get:h[v]})},tt.o=(u,h)=>Object.prototype.hasOwnProperty.call(u,h),tt.nmd=u=>(u.paths=[],u.children||(u.children=[]),u);var yt={};(()=>{tt.d(yt,{hT:()=>D,O4:()=>U,Kd:()=>F,YK:()=>z,UU:()=>hr,Gu:()=>rt,ky:()=>Ue,h4:()=>Rt,ch:()=>zt,hq:()=>jt,i5:()=>$e});var u=tt(737),h=tt.n(u);function v(n){if(!N(n))throw new Error("Parameter was not an error")}function N(n){return t=n,Object.prototype.toString.call(t)==="[object Error]"||n instanceof Error;var t}class x extends Error{constructor(t,e){const r=[...arguments],{options:l,shortMessage:a}=function(A){let I,k="";if(A.length===0)I={};else if(N(A[0]))I={cause:A[0]},k=A.slice(1).join(" ")||"";else if(A[0]&&typeof A[0]=="object")I=Object.assign({},A[0]),k=A.slice(1).join(" ")||"";else{if(typeof A[0]!="string")throw new Error("Invalid arguments passed to Layerr");I={},k=k=A.join(" ")||""}return{options:I,shortMessage:k}}(r);let b=a;if(l.cause&&(b="".concat(b,": ").concat(l.cause.message)),super(b),this.message=b,l.name&&typeof l.name=="string"?this.name=l.name:this.name="Layerr",l.cause&&Object.defineProperty(this,"_cause",{value:l.cause}),Object.defineProperty(this,"_info",{value:{}}),l.info&&typeof l.info=="object"&&Object.assign(this._info,l.info),Error.captureStackTrace){const A=l.constructorOpt||this.constructor;Error.captureStackTrace(this,A)}}static cause(t){return v(t),t._cause&&N(t._cause)?t._cause:null}static fullStack(t){v(t);const e=x.cause(t);return e?"".concat(t.stack,`
caused by: `).concat(x.fullStack(e)):t.stack}static info(t){v(t);const e={},r=x.cause(t);return r&&Object.assign(e,x.info(r)),t._info&&Object.assign(e,t._info),e}cause(){return x.cause(this)}toString(){let t=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t="".concat(t,": ").concat(this.message)),t}}var j=tt(47),E=tt.n(j);const g="__PATH_SEPARATOR_POSIX__",O="__PATH_SEPARATOR_WINDOWS__";function s(n){try{const t=n.replace(/\//g,g).replace(/\\\\/g,O);return encodeURIComponent(t).split(O).join("\\\\").split(g).join("/")}catch(t){throw new x(t,"Failed encoding path")}}function i(n){return n.startsWith("/")?n:"/"+n}function f(n){let t=n;return t[0]!=="/"&&(t="/"+t),/^.+\/$/.test(t)&&(t=t.substr(0,t.length-1)),t}function o(n){let t=new(h())(n).pathname;return t.length<=0&&(t="/"),f(t)}function c(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(){return function(r){var l=[];if(r.length===0)return"";if(typeof r[0]!="string")throw new TypeError("Url must be a string. Received "+r[0]);if(r[0].match(/^[^/:]+:\/*$/)&&r.length>1){var a=r.shift();r[0]=a+r[0]}r[0].match(/^file:\/\/\//)?r[0]=r[0].replace(/^([^/:]+):\/*/,"$1:///"):r[0]=r[0].replace(/^([^/:]+):\/*/,"$1://");for(var b=0;b<r.length;b++){var A=r[b];if(typeof A!="string")throw new TypeError("Url must be a string. Received "+A);A!==""&&(b>0&&(A=A.replace(/^[\/]+/,"")),A=b<r.length-1?A.replace(/[\/]+$/,""):A.replace(/[\/]+$/,"/"),l.push(A))}var I=l.join("/"),k=(I=I.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return k.shift()+(k.length>0?"?":"")+k.join("&")}(typeof arguments[0]=="object"?arguments[0]:[].slice.call(arguments))}(t.reduce((r,l,a)=>((a===0||l!=="/"||l==="/"&&r[r.length-1]!=="/")&&r.push(l),r),[]))}var d=tt(542),w=tt.n(d);const T="abcdef0123456789";function L(n,t){const e=n.url.replace("//",""),r=e.indexOf("/")==-1?"/":e.slice(e.indexOf("/")),l=n.method?n.method.toUpperCase():"GET",a=!!/(^|,)\s*auth\s*($|,)/.test(t.qop)&&"auth",b="00000000".concat(t.nc).slice(-8),A=function(X,Q,q,$,B,Z,H){const G=H||w()("".concat(Q,":").concat(q,":").concat($));return X&&X.toLowerCase()==="md5-sess"?w()("".concat(G,":").concat(B,":").concat(Z)):G}(t.algorithm,t.username,t.realm,t.password,t.nonce,t.cnonce,t.ha1),I=w()("".concat(l,":").concat(r)),k=a?w()("".concat(A,":").concat(t.nonce,":").concat(b,":").concat(t.cnonce,":").concat(a,":").concat(I)):w()("".concat(A,":").concat(t.nonce,":").concat(I)),M={username:t.username,realm:t.realm,nonce:t.nonce,uri:r,qop:a,response:k,nc:b,cnonce:t.cnonce,algorithm:t.algorithm,opaque:t.opaque},V=[];for(const X in M)M[X]&&(X==="qop"||X==="nc"||X==="algorithm"?V.push("".concat(X,"=").concat(M[X])):V.push("".concat(X,'="').concat(M[X],'"')));return"Digest ".concat(V.join(", "))}function p(n){return(n.headers&&n.headers.get("www-authenticate")||"").split(/\s/)[0].toLowerCase()==="digest"}var y=tt(101),C=tt.n(y);function m(n){return C().decode(n)}function _(n,t){const e=(r="".concat(n,":").concat(t),C().encode(r));var r;return"Basic ".concat(e)}const P=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:typeof window<"u"?window:globalThis,S=P.fetch.bind(P),F=P.Request,z=P.Response;let D=function(n){return n.Auto="auto",n.Digest="digest",n.None="none",n.Password="password",n.Token="token",n}({}),U=function(n){return n.DataTypeNoLength="data-type-no-length",n.InvalidAuthType="invalid-auth-type",n.InvalidOutputFormat="invalid-output-format",n.LinkUnsupportedAuthType="link-unsupported-auth",n.InvalidUpdateRange="invalid-update-range",n.NotSupported="not-supported",n}({});function R(n,t,e,r,l){switch(n.authType){case D.Auto:t&&e&&(n.headers.Authorization=_(t,e));break;case D.Digest:n.digest=function(b,A,I){return{username:b,password:A,ha1:I,nc:0,algorithm:"md5",hasDigestAuth:!1}}(t,e,l);break;case D.None:break;case D.Password:n.headers.Authorization=_(t,e);break;case D.Token:n.headers.Authorization="".concat((a=r).token_type," ").concat(a.access_token);break;default:throw new x({info:{code:U.InvalidAuthType}},"Invalid auth type: ".concat(n.authType))}var a}tt(345),tt(800);const W="@@HOTPATCHER",J=()=>{};function ut(n){return{original:n,methods:[n],final:!1}}class Y{constructor(){this._configuration={registry:{},getEmptyAction:"null"},this.__type__=W}get configuration(){return this._configuration}get getEmptyAction(){return this.configuration.getEmptyAction}set getEmptyAction(t){this.configuration.getEmptyAction=t}control(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!t||t.__type__!==W)throw new Error("Failed taking control of target HotPatcher instance: Invalid type or object");return Object.keys(t.configuration.registry).forEach(r=>{this.configuration.registry.hasOwnProperty(r)?e&&(this.configuration.registry[r]=Object.assign({},t.configuration.registry[r])):this.configuration.registry[r]=Object.assign({},t.configuration.registry[r])}),t._configuration=this.configuration,this}execute(t){const e=this.get(t)||J;for(var r=arguments.length,l=new Array(r>1?r-1:0),a=1;a<r;a++)l[a-1]=arguments[a];return e(...l)}get(t){const e=this.configuration.registry[t];if(!e)switch(this.getEmptyAction){case"null":return null;case"throw":throw new Error("Failed handling method request: No method provided for override: ".concat(t));default:throw new Error("Failed handling request which resulted in an empty method: Invalid empty-action specified: ".concat(this.getEmptyAction))}return function(){for(var r=arguments.length,l=new Array(r),a=0;a<r;a++)l[a]=arguments[a];if(l.length===0)throw new Error("Failed creating sequence: No functions provided");return function(){for(var b=arguments.length,A=new Array(b),I=0;I<b;I++)A[I]=arguments[I];let k=A;const M=this;for(;l.length>0;)k=[l.shift().apply(M,k)];return k[0]}}(...e.methods)}isPatched(t){return!!this.configuration.registry[t]}patch(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{chain:l=!1}=r;if(this.configuration.registry[t]&&this.configuration.registry[t].final)throw new Error("Failed patching '".concat(t,"': Method marked as being final"));if(typeof e!="function")throw new Error("Failed patching '".concat(t,"': Provided method is not a function"));if(l)this.configuration.registry[t]?this.configuration.registry[t].methods.push(e):this.configuration.registry[t]=ut(e);else if(this.isPatched(t)){const{original:a}=this.configuration.registry[t];this.configuration.registry[t]=Object.assign(ut(e),{original:a})}else this.configuration.registry[t]=ut(e);return this}patchInline(t,e){this.isPatched(t)||this.patch(t,e);for(var r=arguments.length,l=new Array(r>2?r-2:0),a=2;a<r;a++)l[a-2]=arguments[a];return this.execute(t,...l)}plugin(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),l=1;l<e;l++)r[l-1]=arguments[l];return r.forEach(a=>{this.patch(t,a,{chain:!0})}),this}restore(t){if(!this.isPatched(t))throw new Error("Failed restoring method: No method present for key: ".concat(t));if(typeof this.configuration.registry[t].original!="function")throw new Error("Failed restoring method: Original method not found or of invalid type for key: ".concat(t));return this.configuration.registry[t].methods=[this.configuration.registry[t].original],this}setFinal(t){if(!this.configuration.registry.hasOwnProperty(t))throw new Error("Failed marking '".concat(t,"' as final: No method found for key"));return this.configuration.registry[t].final=!0,this}}let et=null;function rt(){return et||(et=new Y),et}function ct(n){return function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(n)?Object.assign({},n):Object.setPrototypeOf(Object.assign({},n),Object.getPrototypeOf(n))}function vt(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];let r=null,l=[...t];for(;l.length>0;){const a=l.shift();r=r?bt(r,a):ct(a)}return r}function bt(n,t){const e=ct(n);return Object.keys(t).forEach(r=>{e.hasOwnProperty(r)?Array.isArray(t[r])?e[r]=Array.isArray(e[r])?[...e[r],...t[r]]:[...t[r]]:typeof t[r]=="object"&&t[r]?e[r]=typeof e[r]=="object"&&e[r]?bt(e[r],t[r]):ct(t[r]):e[r]=t[r]:e[r]=t[r]}),e}function Mt(n){const t={};for(const e of n.keys())t[e]=n.get(e);return t}function Pt(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];if(t.length===0)return{};const r={};return t.reduce((l,a)=>(Object.keys(a).forEach(b=>{const A=b.toLowerCase();r.hasOwnProperty(A)?l[r[A]]=a[b]:(r[A]=b,l[b]=a[b])}),l),{})}tt(805);const Nt=typeof ArrayBuffer=="function",{toString:Qt}=Object.prototype;function Te(n){return Nt&&(n instanceof ArrayBuffer||Qt.call(n)==="[object ArrayBuffer]")}function je(n){return n!=null&&n.constructor!=null&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function Yt(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}function Jt(n,t,e){return n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n}const Ce=Yt(function(n){const t=n._digest;return delete n._digest,t.hasDigestAuth&&(n=vt(n,{headers:{Authorization:L(n,t)}})),Jt(Dt(n),function(e){let r=!1;return l=function(b){return r?b:e},(a=function(){if(e.status==401)return t.hasDigestAuth=function(b,A){if(!p(b))return!1;const I=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;for(;;){const k=b.headers&&b.headers.get("www-authenticate")||"",M=I.exec(k);if(!M)break;A[M[1]]=M[2]||M[3]}return A.nc+=1,A.cnonce=function(){let k="";for(let M=0;M<32;++M)k="".concat(k).concat(T[Math.floor(16*Math.random())]);return k}(),!0}(e,t),function(){if(t.hasDigestAuth)return Jt(Dt(n=vt(n,{headers:{Authorization:L(n,t)}})),function(b){return b.status==401?t.hasDigestAuth=!1:t.nc++,r=!0,b})}();t.nc++}())&&a.then?a.then(l):l(a);var l,a})}),fn=Yt(function(n,t){return Jt(Dt(n),function(e){return e.ok?(t.authType=D.Password,e):e.status==401&&p(e)?(t.authType=D.Digest,R(t,t.username,t.password,void 0,void 0),n._digest=t.digest,Ce(n)):e})}),ot=Yt(function(n,t){return t.authType===D.Auto?fn(n,t):n._digest?Ce(n):Dt(n)});function it(n,t,e){const r=ct(n);return r.headers=Pt(t.headers,r.headers||{},e.headers||{}),e.data!==void 0&&(r.data=e.data),e.signal&&(r.signal=e.signal),t.httpAgent&&(r.httpAgent=t.httpAgent),t.httpsAgent&&(r.httpsAgent=t.httpsAgent),t.digest&&(r._digest=t.digest),typeof t.withCredentials=="boolean"&&(r.withCredentials=t.withCredentials),r}function Dt(n){const t=rt();return t.patchInline("request",e=>t.patchInline("fetch",S,e.url,function(r){let l={};const a={method:r.method};if(r.headers&&(l=Pt(l,r.headers)),r.data!==void 0){const[b,A]=function(I){if(typeof I=="string")return[I,{}];if(je(I))return[I,{}];if(Te(I))return[I,{}];if(I&&typeof I=="object")return[JSON.stringify(I),{"content-type":"application/json"}];throw new Error("Unable to convert request body: Unexpected body type: ".concat(typeof I))}(r.data);a.body=b,l=Pt(l,A)}return r.signal&&(a.signal=r.signal),r.withCredentials&&(a.credentials="include"),a.headers=l,a}(e)),n)}var pn=tt(285);const dn={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},_t=n=>n.replace(/[[\]\\-]/g,"\\$&"),Pe=n=>n.join(""),gn=(n,t)=>{const e=t;if(n.charAt(e)!=="[")throw new Error("not in a brace expression");const r=[],l=[];let a=e+1,b=!1,A=!1,I=!1,k=!1,M=e,V="";t:for(;a<n.length;){const $=n.charAt(a);if($!=="!"&&$!=="^"||a!==e+1){if($==="]"&&b&&!I){M=a+1;break}if(b=!0,$!=="\\"||I){if($==="["&&!I){for(const[B,[Z,H,G]]of Object.entries(dn))if(n.startsWith(B,a)){if(V)return["$.",!1,n.length-e,!0];a+=B.length,G?l.push(Z):r.push(Z),A=A||H;continue t}}I=!1,V?($>V?r.push(_t(V)+"-"+_t($)):$===V&&r.push(_t($)),V="",a++):n.startsWith("-]",a+1)?(r.push(_t($+"-")),a+=2):n.startsWith("-",a+1)?(V=$,a+=2):(r.push(_t($)),a++)}else I=!0,a++}else k=!0,a++}if(M<a)return["",!1,0,!1];if(!r.length&&!l.length)return["$.",!1,n.length-e,!0];if(l.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!k)return[(X=r[0].length===2?r[0].slice(-1):r[0],X.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,M-e,!1];var X;const Q="["+(k?"^":"")+Pe(r)+"]",q="["+(k?"":"^")+Pe(l)+"]";return[r.length&&l.length?"("+Q+"|"+q+")":r.length?Q:q,A,M-e,!0]};function lt(n,t,e){var r;return(t=typeof(r=function(l,a){if(typeof l!="object"||!l)return l;var b=l[Symbol.toPrimitive];if(b!==void 0){var A=b.call(l,"string");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}(t))=="symbol"?r:String(r))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}const gt=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Ut(t),!(!e.nocomment&&t.charAt(0)==="#")&&new $t(t,e).match(n)},mn=gt,vn=/^\*+([^+@!?\*\[\(]*)$/,wn=n=>t=>!t.startsWith(".")&&t.endsWith(n),yn=n=>t=>t.endsWith(n),bn=n=>(n=n.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(n)),xn=n=>(n=n.toLowerCase(),t=>t.toLowerCase().endsWith(n)),En=/^\*+\.\*+$/,Nn=n=>!n.startsWith(".")&&n.includes("."),An=n=>n!=="."&&n!==".."&&n.includes("."),On=/^\.\*+$/,Tn=n=>n!=="."&&n!==".."&&n.startsWith("."),jn=/^\*+$/,Cn=n=>n.length!==0&&!n.startsWith("."),Pn=n=>n.length!==0&&n!=="."&&n!=="..",Sn=/^\?+([^+@!?\*\[\(]*)?$/,In=n=>{let[t,e=""]=n;const r=Se([t]);return e?(e=e.toLowerCase(),l=>r(l)&&l.toLowerCase().endsWith(e)):r},_n=n=>{let[t,e=""]=n;const r=Ie([t]);return e?(e=e.toLowerCase(),l=>r(l)&&l.toLowerCase().endsWith(e)):r},Rn=n=>{let[t,e=""]=n;const r=Ie([t]);return e?l=>r(l)&&l.endsWith(e):r},Ln=n=>{let[t,e=""]=n;const r=Se([t]);return e?l=>r(l)&&l.endsWith(e):r},Se=n=>{let[t]=n;const e=t.length;return r=>r.length===e&&!r.startsWith(".")},Ie=n=>{let[t]=n;const e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},_e=typeof Xt=="object"&&Xt?typeof de=="object"&&de&&de.__MINIMATCH_TESTING_PLATFORM__||Xt.platform:"posix";gt.sep=_e==="win32"?"\\":"/";const wt=Symbol("globstar **");gt.GLOBSTAR=wt;const Re={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},te="[^/]",ee=te+"*?",Le=n=>n.split("").reduce((t,e)=>(t[e]=!0,t),{}),kn=Le("().*{}+?[]^$\\!"),Fn=Le("[.(");gt.filter=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e=>gt(e,n,t)};const Et=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.assign({},n,t)};gt.defaults=n=>{if(!n||typeof n!="object"||!Object.keys(n).length)return gt;const t=gt;return Object.assign(function(e,r){return t(e,r,Et(n,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}))},{Minimatch:class extends t.Minimatch{constructor(e){super(e,Et(n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}))}static defaults(e){return t.defaults(Et(n,e)).Minimatch}},unescape:function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.unescape(e,Et(n,r))},escape:function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.escape(e,Et(n,r))},filter:function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.filter(e,Et(n,r))},defaults:e=>t.defaults(Et(n,e)),makeRe:function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.makeRe(e,Et(n,r))},braceExpand:function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.braceExpand(e,Et(n,r))},match:function(e,r){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.match(e,r,Et(n,l))},sep:t.sep,GLOBSTAR:wt})};const ke=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ut(n),t.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:pn(n)};gt.braceExpand=ke;const Ut=n=>{if(typeof n!="string")throw new TypeError("invalid pattern");if(n.length>65536)throw new TypeError("pattern is too long")};gt.makeRe=function(n){return new $t(n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).makeRe()},gt.match=function(n,t){const e=new $t(t,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{});return n=n.filter(r=>e.match(r)),e.options.nonull&&!n.length&&n.push(t),n};const Fe=/[?*]|[+@!]\(.*?\)|\[|\]/,Me=n=>n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");class $t{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lt(this,"options",void 0),lt(this,"set",void 0),lt(this,"pattern",void 0),lt(this,"windowsPathsNoEscape",void 0),lt(this,"nonegate",void 0),lt(this,"negate",void 0),lt(this,"comment",void 0),lt(this,"empty",void 0),lt(this,"preserveMultipleSlashes",void 0),lt(this,"partial",void 0),lt(this,"globSet",void 0),lt(this,"globParts",void 0),lt(this,"nocase",void 0),lt(this,"isWindows",void 0),lt(this,"platform",void 0),lt(this,"windowsNoMagicRoot",void 0),lt(this,"regexp",void 0),Ut(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||_e,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||e.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=e.windowsNoMagicRoot!==void 0?e.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const t of this.set)for(const e of t)if(typeof e!="string")return!0;return!1}debug(){}make(){const t=this.pattern,e=this.options;if(!e.nocomment&&t.charAt(0)==="#")return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=function(){return console.error(...arguments)}),this.debug(this.pattern,this.globSet);const r=this.globSet.map(a=>this.slashSplit(a));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let l=this.globParts.map((a,b,A)=>{if(this.isWindows&&this.windowsNoMagicRoot){const I=!(a[0]!==""||a[1]!==""||a[2]!=="?"&&Fe.test(a[2])||Fe.test(a[3])),k=/^[a-z]:/i.test(a[0]);if(I)return[...a.slice(0,4),...a.slice(4).map(M=>this.parse(M))];if(k)return[a[0],...a.slice(1).map(M=>this.parse(M))]}return a.map(I=>this.parse(I))});if(this.debug(this.pattern,l),this.set=l.filter(a=>a.indexOf(!1)===-1),this.isWindows)for(let a=0;a<this.set.length;a++){const b=this.set[a];b[0]===""&&b[1]===""&&this.globParts[a][2]==="?"&&typeof b[3]=="string"&&/^[a-z]:$/i.test(b[3])&&(b[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let r=0;r<t.length;r++)for(let l=0;l<t[r].length;l++)t[r][l]==="**"&&(t[r][l]="*");const{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):t=e>=1?this.levelOneOptimize(t):this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map(e=>{let r=-1;for(;(r=e.indexOf("**",r+1))!==-1;){let l=r;for(;e[l+1]==="**";)l++;l!==r&&e.splice(r,l-r)}return e})}levelOneOptimize(t){return t.map(e=>(e=e.reduce((r,l)=>{const a=r[r.length-1];return l==="**"&&a==="**"?r:l===".."&&a&&a!==".."&&a!=="."&&a!=="**"?(r.pop(),r):(r.push(l),r)},[])).length===0?[""]:e)}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let l=1;l<t.length-1;l++){const a=t[l];l===1&&a===""&&t[0]===""||a!=="."&&a!==""||(e=!0,t.splice(l,1),l--)}t[0]!=="."||t.length!==2||t[1]!=="."&&t[1]!==""||(e=!0,t.pop())}let r=0;for(;(r=t.indexOf("..",r+1))!==-1;){const l=t[r-1];l&&l!=="."&&l!==".."&&l!=="**"&&(e=!0,t.splice(r-1,2),r-=2)}}while(e);return t.length===0?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let r of t){let l=-1;for(;(l=r.indexOf("**",l+1))!==-1;){let b=l;for(;r[b+1]==="**";)b++;b>l&&r.splice(l+1,b-l);let A=r[l+1];const I=r[l+2],k=r[l+3];if(A!==".."||!I||I==="."||I===".."||!k||k==="."||k==="..")continue;e=!0,r.splice(l,1);const M=r.slice(0);M[l]="**",t.push(M),l--}if(!this.preserveMultipleSlashes){for(let b=1;b<r.length-1;b++){const A=r[b];b===1&&A===""&&r[0]===""||A!=="."&&A!==""||(e=!0,r.splice(b,1),b--)}r[0]!=="."||r.length!==2||r[1]!=="."&&r[1]!==""||(e=!0,r.pop())}let a=0;for(;(a=r.indexOf("..",a+1))!==-1;){const b=r[a-1];if(b&&b!=="."&&b!==".."&&b!=="**"){e=!0;const A=a===1&&r[a+1]==="**"?["."]:[];r.splice(a-1,2,...A),r.length===0&&r.push(""),a-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let r=e+1;r<t.length;r++){const l=this.partsMatch(t[e],t[r],!this.preserveMultipleSlashes);l&&(t[e]=l,t[r]=[])}return t.filter(e=>e.length)}partsMatch(t,e){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],l=0,a=0,b=[],A="";for(;l<t.length&&a<e.length;)if(t[l]===e[a])b.push(A==="b"?e[a]:t[l]),l++,a++;else if(r&&t[l]==="**"&&e[a]===t[l+1])b.push(t[l]),l++;else if(r&&e[a]==="**"&&t[l]===e[a+1])b.push(e[a]),a++;else if(t[l]!=="*"||!e[a]||!this.options.dot&&e[a].startsWith(".")||e[a]==="**"){if(e[a]!=="*"||!t[l]||!this.options.dot&&t[l].startsWith(".")||t[l]==="**"||A==="a")return!1;A="b",b.push(e[a]),l++,a++}else{if(A==="b")return!1;A="a",b.push(t[l]),l++,a++}return t.length===e.length&&b}parseNegate(){if(this.nonegate)return;const t=this.pattern;let e=!1,r=0;for(let l=0;l<t.length&&t.charAt(l)==="!";l++)e=!e,r++;r&&(this.pattern=t.slice(r)),this.negate=e}matchOne(t,e){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const l=this.options;if(this.isWindows){const $=t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),B=e[0]===""&&e[1]===""&&e[2]==="?"&&typeof e[3]=="string"&&/^[a-z]:$/i.test(e[3]);if($&&B){const Z=t[3],H=e[3];Z.toLowerCase()===H.toLowerCase()&&(t[3]=H)}else if(B&&typeof t[0]=="string"){const Z=e[3],H=t[0];Z.toLowerCase()===H.toLowerCase()&&(e[3]=H,e=e.slice(3))}else if($&&typeof e[0]=="string"){const Z=t[3];Z.toLowerCase()===e[0].toLowerCase()&&(e[0]=Z,t=t.slice(3))}}const{optimizationLevel:a=1}=this.options;a>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var b=0,A=0,I=t.length,k=e.length;b<I&&A<k;b++,A++){this.debug("matchOne loop");var M=e[A],V=t[b];if(this.debug(e,M,V),M===!1)return!1;if(M===wt){this.debug("GLOBSTAR",[e,M,V]);var X=b,Q=A+1;if(Q===k){for(this.debug("** at the end");b<I;b++)if(t[b]==="."||t[b]===".."||!l.dot&&t[b].charAt(0)===".")return!1;return!0}for(;X<I;){var q=t[X];if(this.debug(`
globstar while`,t,X,e,Q,q),this.matchOne(t.slice(X),e.slice(Q),r))return this.debug("globstar found match!",X,I,q),!0;if(q==="."||q===".."||!l.dot&&q.charAt(0)==="."){this.debug("dot detected!",t,X,e,Q);break}this.debug("globstar swallow a segment, and continue"),X++}return!(!r||(this.debug(`
>>> no match, partial?`,t,X,e,Q),X!==I))}let $;if(typeof M=="string"?($=V===M,this.debug("string match",M,V,$)):($=M.test(V),this.debug("pattern match",M,V,$)),!$)return!1}if(b===I&&A===k)return!0;if(b===I)return r;if(A===k)return b===I-1&&t[b]==="";throw new Error("wtf?")}braceExpand(){return ke(this.pattern,this.options)}parse(t){Ut(t);const e=this.options;if(t==="**")return wt;if(t==="")return"";let r,l=null;(r=t.match(jn))?l=e.dot?Pn:Cn:(r=t.match(vn))?l=(e.nocase?e.dot?xn:bn:e.dot?yn:wn)(r[1]):(r=t.match(Sn))?l=(e.nocase?e.dot?_n:In:e.dot?Rn:Ln)(r):(r=t.match(En))?l=e.dot?An:Nn:(r=t.match(On))&&(l=Tn);let a="",b=!1,A=!1;const I=[],k=[];let M,V=!1,X=!1,Q=t.charAt(0)===".",q=e.dot||Q;const $=G=>G.charAt(0)==="."?"":e.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",B=()=>{if(V){switch(V){case"*":a+=ee,b=!0;break;case"?":a+=te,b=!0;break;default:a+="\\"+V}this.debug("clearStateChar %j %j",V,a),V=!1}};for(let G,K=0;K<t.length&&(G=t.charAt(K));K++)if(this.debug("%s	%s %s %j",t,K,a,G),A){if(G==="/")return!1;kn[G]&&(a+="\\"),a+=G,A=!1}else switch(G){case"/":return!1;case"\\":B(),A=!0;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s	%s %s %j <-- stateChar",t,K,a,G),this.debug("call clearStateChar %j",V),B(),V=G,e.noext&&B();continue;case"(":{if(!V){a+="\\(";continue}const nt={type:V,start:K-1,reStart:a.length,open:Re[V].open,close:Re[V].close};this.debug(this.pattern,"	",nt),I.push(nt),a+=nt.open,nt.start===0&&nt.type!=="!"&&(Q=!0,a+=$(t.slice(K+1))),this.debug("plType %j %j",V,a),V=!1;continue}case")":{const nt=I[I.length-1];if(!nt){a+="\\)";continue}I.pop(),B(),b=!0,M=nt,a+=M.close,M.type==="!"&&k.push(Object.assign(M,{reEnd:a.length}));continue}case"|":{const nt=I[I.length-1];if(!nt){a+="\\|";continue}B(),a+="|",nt.start===0&&nt.type!=="!"&&(Q=!0,a+=$(t.slice(K+1)));continue}case"[":B();const[pt,at,ht,kt]=gn(t,K);ht?(a+=pt,X=X||at,K+=ht-1,b=b||kt):a+="\\[";continue;case"]":a+="\\"+G;continue;default:B(),a+=Me(G)}for(M=I.pop();M;M=I.pop()){let G;G=a.slice(M.reStart+M.open.length),this.debug(this.pattern,"setting tail",a,M),G=G.replace(/((?:\\{2}){0,64})(\\?)\|/g,(pt,at,ht)=>(ht||(ht="\\"),at+at+ht+"|")),this.debug(`tail=%j
   %s`,G,G,M,a);const K=M.type==="*"?ee:M.type==="?"?te:"\\"+M.type;b=!0,a=a.slice(0,M.reStart)+K+"\\("+G}B(),A&&(a+="\\\\");const Z=Fn[a.charAt(0)];for(let G=k.length-1;G>-1;G--){const K=k[G],pt=a.slice(0,K.reStart),at=a.slice(K.reStart,K.reEnd-8);let ht=a.slice(K.reEnd);const kt=a.slice(K.reEnd-8,K.reEnd)+ht,nt=pt.split(")").length,fr=pt.split("(").length-nt;let pe=ht;for(let Qe=0;Qe<fr;Qe++)pe=pe.replace(/\)[+*?]?/,"");ht=pe,a=pt+at+ht+(ht===""?"(?:$|\\/)":"")+kt}if(a!==""&&b&&(a="(?=.)"+a),Z&&(a=(Q?"":q?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)")+a),!e.nocase||b||e.nocaseMagicOnly||(b=t.toUpperCase()!==t.toLowerCase()),!b)return a.replace(/\\(.)/g,"$1");const H=(e.nocase?"i":"")+(X?"u":"");try{const G=l?{_glob:t,_src:a,test:l}:{_glob:t,_src:a};return Object.assign(new RegExp("^"+a+"$",H),G)}catch(G){return this.debug("invalid regexp",G),new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const e=this.options,r=e.noglobstar?ee:e.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",l=e.nocase?"i":"";let a=t.map(b=>{const A=b.map(I=>typeof I=="string"?Me(I):I===wt?wt:I._src);return A.forEach((I,k)=>{const M=A[k+1],V=A[k-1];I===wt&&V!==wt&&(V===void 0?M!==void 0&&M!==wt?A[k+1]="(?:\\/|"+r+"\\/)?"+M:A[k]=r:M===void 0?A[k-1]=V+"(?:\\/|"+r+")?":M!==wt&&(A[k-1]=V+"(?:\\/|\\/"+r+"\\/)"+M,A[k+1]=wt))}),A.filter(I=>I!==wt).join("/")}).join("|");a="^(?:"+a+")$",this.negate&&(a="^(?!"+a+").*$");try{this.regexp=new RegExp(a,l)}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.partial;if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&e)return!0;const r=this.options;this.isWindows&&(t=t.split("\\").join("/"));const l=this.slashSplit(t);this.debug(this.pattern,"split",l);const a=this.set;this.debug(this.pattern,"set",a);let b=l[l.length-1];if(!b)for(let A=l.length-2;!b&&A>=0;A--)b=l[A];for(let A=0;A<a.length;A++){const I=a[A];let k=l;if(r.matchBase&&I.length===1&&(k=[b]),this.matchOne(k,I,e))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate}static defaults(t){return gt.defaults(t).Minimatch}}function ne(n){const t=new Error("".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"","Invalid response: ").concat(n.status," ").concat(n.statusText));return t.status=n.status,t.response=n,t}function st(n,t){const{status:e}=t;if(e===401&&n.digest)return t;if(e>=400)throw ne(t);return t}function jt(n,t){return arguments.length>2&&arguments[2]!==void 0&&arguments[2]?{data:t,headers:n.headers?Mt(n.headers):{},status:n.status,statusText:n.statusText}:t}gt.Minimatch=$t,gt.escape=function(n){let{windowsPathsNoEscape:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t?n.replace(/[?*()[\]]/g,"[$&]"):n.replace(/[?*()[\]\\]/g,"\\$&")},gt.unescape=function(n){let{windowsPathsNoEscape:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t?n.replace(/\[([^\/\\])\]/g,"$1"):n.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")};const Mn=(De=function(n,t,e){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const l=it({url:c(n.remoteURL,s(t)),method:"COPY",headers:{Destination:c(n.remoteURL,s(e)),Overwrite:r.overwrite===!1?"F":"T",Depth:r.shallow?"0":"infinity"}},n,r);return b=function(A){st(n,A)},(a=ot(l,n))&&a.then||(a=Promise.resolve(a)),b?a.then(b):a;var a,b},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];try{return Promise.resolve(De.apply(this,n))}catch(e){return Promise.reject(e)}});var De,re=tt(635),Dn=tt(829),At=tt.n(Dn),St=function(n){return n.Array="array",n.Object="object",n.Original="original",n}(St||{});function Bt(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:St.Original;const r=At().get(n,t);return e==="array"&&Array.isArray(r)===!1?[r]:e==="object"&&Array.isArray(r)?r[0]:r}function Rt(n){return new Promise(t=>{t(function(e){const{multistatus:r}=e;if(r==="")return{multistatus:{response:[]}};if(!r)throw new Error("Invalid response: No root multistatus found");const l={multistatus:Array.isArray(r)?r[0]:r};return At().set(l,"multistatus.response",Bt(l,"multistatus.response",St.Array)),At().set(l,"multistatus.response",At().get(l,"multistatus.response").map(a=>function(b){const A=Object.assign({},b);return A.status?At().set(A,"status",Bt(A,"status",St.Object)):(At().set(A,"propstat",Bt(A,"propstat",St.Object)),At().set(A,"propstat.prop",Bt(A,"propstat.prop",St.Object))),A}(a))),l}(new re.XMLParser({removeNSPrefix:!0,numberParseOptions:{hex:!0,leadingZeros:!1}}).parse(n)))})}function zt(n,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const{getlastmodified:r=null,getcontentlength:l="0",resourcetype:a=null,getcontenttype:b=null,getetag:A=null}=n,I=a&&typeof a=="object"&&a.collection!==void 0?"directory":"file",k={filename:t,basename:E().basename(t),lastmod:r,size:parseInt(l,10),type:I,etag:typeof A=="string"?A.replace(/"/g,""):null};return I==="file"&&(k.mime=b&&typeof b=="string"?b.split(";")[0]:""),e&&(k.props=n),k}function Ue(n,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2],r=null;try{n.multistatus.response[0].propstat&&(r=n.multistatus.response[0])}catch{}if(!r)throw new Error("Failed getting item stat: bad response");const{propstat:{prop:l,status:a}}=r,[b,A,I]=a.split(" ",3),k=parseInt(A,10);if(k>=400){const M=new Error("Invalid response: ".concat(k," ").concat(I));throw M.status=k,M}return zt(l,f(t),e)}function $e(n){switch(n.toString()){case"-3":return"unlimited";case"-2":case"-1":return"unknown";default:return parseInt(n,10)}}function oe(n,t,e){return n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n}const ie=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:r=!1}=e,l=it({url:c(n.remoteURL,s(t)),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},n,e);return oe(ot(l,n),function(a){return st(n,a),oe(a.text(),function(b){return oe(Rt(b),function(A){const I=Ue(A,t,r);return jt(a,I,r)})})})});function Be(n,t,e){return n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n}const Un=ze(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=function(a){if(!a||a==="/")return[];let b=a;const A=[];do A.push(b),b=E().dirname(b);while(b&&b!=="/");return A}(f(t));r.sort((a,b)=>a.length>b.length?1:b.length>a.length?-1:0);let l=!1;return function(a,b,A){if(typeof a[We]=="function"){let $=function(B){try{for(;!(I=V.next()).done;)if((B=b(I.value))&&B.then){if(!qe(B))return void B.then($,M||(M=mt.bind(null,k=new It,2)));B=B.v}k?mt(k,1,B):k=B}catch(Z){mt(k||(k=new It),2,Z)}};var I,k,M,V=a[We]();if($(),V.return){var X=function(B){try{I.done||V.return()}catch{}return B};if(k&&k.then)return k.then(X,function(B){throw X(B)});X()}return k}if(!("length"in a))throw new TypeError("Object is not iterable");for(var Q=[],q=0;q<a.length;q++)Q.push(a[q]);return function($,B,Z){var H,G,K=-1;return function pt(at){try{for(;++K<$.length&&(!Z||!Z());)if((at=B(K))&&at.then){if(!qe(at))return void at.then(pt,G||(G=mt.bind(null,H=new It,2)));at=at.v}H?mt(H,1,at):H=at}catch(ht){mt(H||(H=new It),2,ht)}}(),H}(Q,function($){return b(Q[$])},A)}(r,function(a){return b=function(){return function(I,k){try{var M=Be(ie(n,a),function(V){if(V.type!=="directory")throw new Error("Path includes a file: ".concat(t))})}catch(V){return k(V)}return M&&M.then?M.then(void 0,k):M}(0,function(I){const k=I;return function(){if(k.status===404)return l=!0,Ve(se(n,a,{...e,recursive:!1}));throw I}()})},(A=function(){if(l)return Ve(se(n,a,{...e,recursive:!1}))}())&&A.then?A.then(b):b();var b,A},function(){return!1})});function ze(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}function $n(){}function Ve(n,t){return n&&n.then?n.then($n):Promise.resolve()}const We=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function mt(n,t,e){if(!n.s){if(e instanceof It){if(!e.s)return void(e.o=mt.bind(null,n,t));1&t&&(t=e.s),e=e.v}if(e&&e.then)return void e.then(mt.bind(null,n,t),mt.bind(null,n,2));n.s=t,n.v=e;const r=n.o;r&&r(n)}}const It=function(){function n(){}return n.prototype.then=function(t,e){const r=new n,l=this.s;if(l){const a=1&l?t:e;if(a){try{mt(r,1,a(this.v))}catch(b){mt(r,2,b)}return r}return this}return this.o=function(a){try{const b=a.v;1&a.s?mt(r,1,t?t(b):b):e?mt(r,1,e(b)):mt(r,2,b)}catch(b){mt(r,2,b)}},r},n}();function qe(n){return n instanceof It&&1&n.s}const se=ze(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e.recursive===!0)return Un(n,t,e);const r=it({url:c(n.remoteURL,(l=s(t),l.endsWith("/")?l:l+"/")),method:"MKCOL"},n,e);var l;return Be(ot(r,n),function(a){st(n,a)})});var Bn=tt(388),Ge=tt.n(Bn);const zn=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r={};if(typeof e.range=="object"&&typeof e.range.start=="number"){let A="bytes=".concat(e.range.start,"-");typeof e.range.end=="number"&&(A="".concat(A).concat(e.range.end)),r.Range=A}const l=it({url:c(n.remoteURL,s(t)),method:"GET",headers:r},n,e);return b=function(A){if(st(n,A),r.Range&&A.status!==206){const I=new Error("Invalid response code for partial request: ".concat(A.status));throw I.status=A.status,I}return e.callback&&setTimeout(()=>{e.callback(A)},0),A.body},(a=ot(l,n))&&a.then||(a=Promise.resolve(a)),b?a.then(b):a;var a,b}),Vn=()=>{},Wn=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(n,t,e){e.url||(e.url=c(n.remoteURL,s(t)));const r=it(e,n,{});return a=function(b){return st(n,b),b},(l=ot(r,n))&&l.then||(l=Promise.resolve(l)),a?l.then(a):l;var l,a}),qn=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=it({url:c(n.remoteURL,s(t)),method:"DELETE"},n,e);return a=function(b){st(n,b)},(l=ot(r,n))&&l.then||(l=Promise.resolve(l)),a?l.then(a):l;var l,a}),Gn=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function(r,l){try{var a=(b=ie(n,t,e),A=function(){return!0},I?A?A(b):b:(b&&b.then||(b=Promise.resolve(b)),A?b.then(A):b))}catch(k){return l(k)}var b,A,I;return a&&a.then?a.then(void 0,l):a}(0,function(r){if(r.status===404)return!1;throw r})});function ae(n,t,e){return n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n}const Xn=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=it({url:c(n.remoteURL,s(t),"/"),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:e.deep?"infinity":"1"}},n,e);return ae(ot(r,n),function(l){return st(n,l),ae(l.text(),function(a){if(!a)throw new Error("Failed parsing directory contents: Empty response");return ae(Rt(a),function(b){const A=i(t);let I=function(k,M,V){let X=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Q=arguments.length>4&&arguments[4]!==void 0&&arguments[4];const q=E().join(M,"/"),{multistatus:{response:$}}=k,B=$.map(Z=>{const H=function(K){try{return K.replace(/^https?:\/\/[^\/]+/,"")}catch(pt){throw new x(pt,"Failed normalising HREF")}}(Z.href),{propstat:{prop:G}}=Z;return zt(G,q==="/"?decodeURIComponent(f(H)):f(E().relative(decodeURIComponent(q),decodeURIComponent(H))),X)});return Q?B:B.filter(Z=>Z.basename&&(Z.type==="file"||Z.filename!==V.replace(/\/$/,"")))}(b,i(n.remoteBasePath||n.remotePath),A,e.details,e.includeSelf);return e.glob&&(I=function(k,M){return k.filter(V=>mn(V.filename,M,{matchBase:!0}))}(I,e.glob)),jt(l,I,e.details)})})})});function ce(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}const Zn=ce(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=it({url:c(n.remoteURL,s(t)),method:"GET",headers:{Accept:"text/plain"},transformResponse:[Qn]},n,e);return Vt(ot(r,n),function(l){return st(n,l),Vt(l.text(),function(a){return jt(l,a,e.details)})})});function Vt(n,t,e){return n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n}const Hn=ce(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=it({url:c(n.remoteURL,s(t)),method:"GET"},n,e);return Vt(ot(r,n),function(l){let a;return st(n,l),function(b,A){var I=b();return I&&I.then?I.then(A):A()}(function(){return Vt(l.arrayBuffer(),function(b){a=b})},function(){return jt(l,a,e.details)})})}),Kn=ce(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{format:r="binary"}=e;if(r!=="binary"&&r!=="text")throw new x({info:{code:U.InvalidOutputFormat}},"Invalid output format: ".concat(r));return r==="text"?Zn(n,t,e):Hn(n,t,e)}),Qn=n=>n;function Yn(n){return new re.XMLBuilder({attributeNamePrefix:"@_",format:!0,ignoreAttributes:!1,suppressEmptyNode:!0}).build(Xe({lockinfo:{"@_xmlns:d":"DAV:",lockscope:{exclusive:{}},locktype:{write:{}},owner:{href:n}}},"d"))}function Xe(n,t){const e={...n};for(const r in e)e.hasOwnProperty(r)&&(e[r]&&typeof e[r]=="object"&&r.indexOf(":")===-1?(e["".concat(t,":").concat(r)]=Xe(e[r],t),delete e[r]):/^@_/.test(r)===!1&&(e["".concat(t,":").concat(r)]=e[r],delete e[r]));return e}function ue(n,t,e){return n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n}function Ze(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}const Jn=Ze(function(n,t,e){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const l=it({url:c(n.remoteURL,s(t)),method:"UNLOCK",headers:{"Lock-Token":e}},n,r);return ue(ot(l,n),function(a){if(st(n,a),a.status!==204&&a.status!==200)throw ne(a)})}),tr=Ze(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{refreshToken:r,timeout:l=er}=e,a={Accept:"text/plain,application/xml",Timeout:l};r&&(a.If=r);const b=it({url:c(n.remoteURL,s(t)),method:"LOCK",headers:a,data:Yn(n.contactHref)},n,e);return ue(ot(b,n),function(A){return st(n,A),ue(A.text(),function(I){const k=(X=I,new re.XMLParser({removeNSPrefix:!0,parseAttributeValue:!0,parseTagValue:!0}).parse(X)),M=At().get(k,"prop.lockdiscovery.activelock.locktoken.href"),V=At().get(k,"prop.lockdiscovery.activelock.timeout");var X;if(!M)throw ne(A,"No lock token received: ");return{token:M,serverTimeout:V}})})}),er="Infinite, Second-4100000000";function le(n,t,e){return n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n}const nr=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=t.path||"/",r=it({url:c(n.remoteURL,e),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},n,t);return le(ot(r,n),function(l){return st(n,l),le(l.text(),function(a){return le(Rt(a),function(b){const A=function(I){try{const[k]=I.multistatus.response,{propstat:{prop:{"quota-used-bytes":M,"quota-available-bytes":V}}}=k;return M!==void 0&&V!==void 0?{used:parseInt(M,10),available:$e(V)}:null}catch{}return null}(b);return jt(l,A,t.details)})})})});function he(n,t,e){return n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n}const rr=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:r=!1}=e,l=it({url:c(n.remoteURL,s(t)),method:"SEARCH",headers:{Accept:"text/plain,application/xml","Content-Type":n.headers["Content-Type"]||"application/xml; charset=utf-8"}},n,e);return he(ot(l,n),function(a){return st(n,a),he(a.text(),function(b){return he(Rt(b),function(A){const I=function(k,M,V){const X={truncated:!1,results:[]};return X.truncated=k.multistatus.response.some(Q=>{var q,$;return((q=(Q.status||(($=Q.propstat)===null||$===void 0?void 0:$.status)).split(" ",3))===null||q===void 0?void 0:q[1])==="507"&&Q.href.replace(/\/$/,"").endsWith(s(M).replace(/\/$/,""))}),k.multistatus.response.forEach(Q=>{if(Q.propstat===void 0)return;const q=Q.href.split("/").map(decodeURIComponent).join("/");X.results.push(zt(Q.propstat.prop,q,V))}),X}(A,t,r);return jt(a,I,r)})})})}),or=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(n,t,e){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const l=it({url:c(n.remoteURL,s(t)),method:"MOVE",headers:{Destination:c(n.remoteURL,s(e)),Overwrite:r.overwrite===!1?"F":"T"}},n,r);return b=function(A){st(n,A)},(a=ot(l,n))&&a.then||(a=Promise.resolve(a)),b?a.then(b):a;var a,b});var ir=tt(172);const sr=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(n,t,e){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const{contentLength:l=!0,overwrite:a=!0}=r,b={"Content-Type":"application/octet-stream"};l===!1||(b["Content-Length"]="".concat(typeof l=="number"?l:function(M){if(Te(M))return M.byteLength;if(je(M))return M.length;if(typeof M=="string")return(0,ir.d)(M);throw new x({info:{code:U.DataTypeNoLength}},"Cannot calculate data length: Invalid type")}(e))),a||(b["If-None-Match"]="*");const A=it({url:c(n.remoteURL,s(t)),method:"PUT",headers:b,data:e},n,r);return k=function(M){try{st(n,M)}catch(V){const X=V;if(X.status!==412||a)throw X;return!1}return!0},(I=ot(A,n))&&I.then||(I=Promise.resolve(I)),k?I.then(k):I;var I,k}),He=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}(function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=it({url:c(n.remoteURL,s(t)),method:"OPTIONS"},n,e);return a=function(b){var A,I;try{st(n,b)}catch(k){throw k}return{compliance:((A=b.headers.get("DAV"))!==null&&A!==void 0?A:"").split(",").map(k=>k.trim()),server:(I=b.headers.get("Server"))!==null&&I!==void 0?I:""}},(l=ot(r,n))&&l.then||(l=Promise.resolve(l)),a?l.then(a):l;var l,a});function Lt(n,t,e){return n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n}const ar=fe(function(n,t,e,r,l){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(e>r||e<0)throw new x({info:{code:U.InvalidUpdateRange}},"Invalid update range ".concat(e," for partial update"));const b={"Content-Type":"application/octet-stream","Content-Length":"".concat(r-e+1),"Content-Range":"bytes ".concat(e,"-").concat(r,"/*")},A=it({url:c(n.remoteURL,s(t)),method:"PUT",headers:b,data:l},n,a);return Lt(ot(A,n),function(I){st(n,I)})});function Ke(n,t){var e=n();return e&&e.then?e.then(t):t(e)}const cr=fe(function(n,t,e,r,l){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(e>r||e<0)throw new x({info:{code:U.InvalidUpdateRange}},"Invalid update range ".concat(e," for partial update"));const b={"Content-Type":"application/x-sabredav-partialupdate","Content-Length":"".concat(r-e+1),"X-Update-Range":"bytes=".concat(e,"-").concat(r)},A=it({url:c(n.remoteURL,s(t)),method:"PATCH",headers:b,data:l},n,a);return Lt(ot(A,n),function(I){st(n,I)})});function fe(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(r){return Promise.reject(r)}}}const ur=fe(function(n,t,e,r,l){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};return Lt(He(n,t,a),function(b){let A=!1;return Ke(function(){if(b.compliance.includes("sabredav-partialupdate"))return Lt(cr(n,t,e,r,l,a),function(I){return A=!0,I})},function(I){let k=!1;return A?I:Ke(function(){if(b.server.includes("Apache")&&b.compliance.includes("<http://apache.org/dav/propset/fs/1>"))return Lt(ar(n,t,e,r,l,a),function(M){return k=!0,M})},function(M){if(k)return M;throw new x({info:{code:U.NotSupported}},"Not supported")})})})}),lr="https://github.com/perry-mitchell/webdav-client/blob/master/LOCK_CONTACT.md";function hr(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{authType:e=null,remoteBasePath:r,contactHref:l=lr,ha1:a,headers:b={},httpAgent:A,httpsAgent:I,password:k,token:M,username:V,withCredentials:X}=t;let Q=e;Q||(Q=V||k?D.Password:D.None);const q={authType:Q,remoteBasePath:r,contactHref:l,ha1:a,headers:Object.assign({},b),httpAgent:A,httpsAgent:I,password:k,remotePath:o(n),remoteURL:n,token:M,username:V,withCredentials:X};return R(q,V,k,M,a),{copyFile:($,B,Z)=>Mn(q,$,B,Z),createDirectory:($,B)=>se(q,$,B),createReadStream:($,B)=>function(Z,H){let G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const K=new(Ge()).PassThrough;return zn(Z,H,G).then(pt=>{pt.pipe(K)}).catch(pt=>{K.emit("error",pt)}),K}(q,$,B),createWriteStream:($,B,Z)=>function(H,G){let K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},pt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Vn;const at=new(Ge()).PassThrough,ht={};K.overwrite===!1&&(ht["If-None-Match"]="*");const kt=it({url:c(H.remoteURL,s(G)),method:"PUT",headers:ht,data:at,maxRedirects:0},H,K);return ot(kt,H).then(nt=>st(H,nt)).then(nt=>{setTimeout(()=>{pt(nt)},0)}).catch(nt=>{at.emit("error",nt)}),at}(q,$,B,Z),customRequest:($,B)=>Wn(q,$,B),deleteFile:($,B)=>qn(q,$,B),exists:($,B)=>Gn(q,$,B),getDirectoryContents:($,B)=>Xn(q,$,B),getFileContents:($,B)=>Kn(q,$,B),getFileDownloadLink:$=>function(B,Z){let H=c(B.remoteURL,s(Z));const G=/^https:/i.test(H)?"https":"http";switch(B.authType){case D.None:break;case D.Password:{const K=m(B.headers.Authorization.replace(/^Basic /i,"").trim());H=H.replace(/^https?:\/\//,"".concat(G,"://").concat(K,"@"));break}default:throw new x({info:{code:U.LinkUnsupportedAuthType}},"Unsupported auth type for file link: ".concat(B.authType))}return H}(q,$),getFileUploadLink:$=>function(B,Z){let H="".concat(c(B.remoteURL,s(Z)),"?Content-Type=application/octet-stream");const G=/^https:/i.test(H)?"https":"http";switch(B.authType){case D.None:break;case D.Password:{const K=m(B.headers.Authorization.replace(/^Basic /i,"").trim());H=H.replace(/^https?:\/\//,"".concat(G,"://").concat(K,"@"));break}default:throw new x({info:{code:U.LinkUnsupportedAuthType}},"Unsupported auth type for file link: ".concat(B.authType))}return H}(q,$),getHeaders:()=>Object.assign({},q.headers),getQuota:$=>nr(q,$),lock:($,B)=>tr(q,$,B),moveFile:($,B,Z)=>or(q,$,B,Z),putFileContents:($,B,Z)=>sr(q,$,B,Z),partialUpdateFileContents:($,B,Z,H,G)=>ur(q,$,B,Z,H,G),getDAVCompliance:$=>He(q,$),search:($,B)=>rr(q,$,B),setHeaders:$=>{q.headers=Object.assign({},$)},stat:($,B)=>ie(q,$,B),unlock:($,B,Z)=>Jn(q,$,B,Z)}}})(),yt.hT,yt.O4,yt.Kd,yt.YK;var Or=yt.UU,Tr=yt.Gu;yt.ky,yt.h4,yt.ch,yt.hq,yt.i5;const ve=pr().setApp("@nextcloud/files").detectUser().build();var cn=(u=>(u.DEFAULT="default",u.HIDDEN="hidden",u))(cn||{});class $r{_action;constructor(h){this.validateAction(h),this._action=h}get id(){return this._action.id}get displayName(){return this._action.displayName}get title(){return this._action.title}get iconSvgInline(){return this._action.iconSvgInline}get enabled(){return this._action.enabled}get exec(){return this._action.exec}get execBatch(){return this._action.execBatch}get order(){return this._action.order}get parent(){return this._action.parent}get default(){return this._action.default}get inline(){return this._action.inline}get renderInline(){return this._action.renderInline}validateAction(h){if(!h.id||typeof h.id!="string")throw new Error("Invalid id");if(!h.displayName||typeof h.displayName!="function")throw new Error("Invalid displayName function");if("title"in h&&typeof h.title!="function")throw new Error("Invalid title function");if(!h.iconSvgInline||typeof h.iconSvgInline!="function")throw new Error("Invalid iconSvgInline function");if(!h.exec||typeof h.exec!="function")throw new Error("Invalid exec function");if("enabled"in h&&typeof h.enabled!="function")throw new Error("Invalid enabled function");if("execBatch"in h&&typeof h.execBatch!="function")throw new Error("Invalid execBatch function");if("order"in h&&typeof h.order!="number")throw new Error("Invalid order");if("parent"in h&&typeof h.parent!="string")throw new Error("Invalid parent");if(h.default&&!Object.values(cn).includes(h.default))throw new Error("Invalid default");if("inline"in h&&typeof h.inline!="function")throw new Error("Invalid inline function");if("renderInline"in h&&typeof h.renderInline!="function")throw new Error("Invalid renderInline function")}}const Br=function(u){if(typeof window._nc_fileactions>"u"&&(window._nc_fileactions=[],ve.debug("FileActions initialized")),window._nc_fileactions.find(h=>h.id===u.id)){ve.error(`FileAction ${u.id} already registered`,{action:u});return}window._nc_fileactions.push(u)};var xt=(u=>(u[u.NONE=0]="NONE",u[u.CREATE=4]="CREATE",u[u.READ=1]="READ",u[u.UPDATE=2]="UPDATE",u[u.DELETE=8]="DELETE",u[u.SHARE=16]="SHARE",u[u.ALL=31]="ALL",u))(xt||{});const jr=["d:getcontentlength","d:getcontenttype","d:getetag","d:getlastmodified","d:creationdate","d:displayname","d:quota-available-bytes","d:resourcetype","nc:has-preview","nc:is-encrypted","nc:mount-type","oc:comments-unread","oc:favorite","oc:fileid","oc:owner-display-name","oc:owner-id","oc:permissions","oc:size"],Cr={d:"DAV:",nc:"http://nextcloud.org/ns",oc:"http://owncloud.org/ns",ocs:"http://open-collaboration-services.org/ns"},Ee=function(){return typeof window._nc_dav_properties>"u"&&(window._nc_dav_properties=[...jr]),window._nc_dav_properties.map(u=>`<${u} />`).join(" ")},Ne=function(){return typeof window._nc_dav_namespaces>"u"&&(window._nc_dav_namespaces={...Cr}),Object.keys(window._nc_dav_namespaces).map(u=>`xmlns:${u}="${window._nc_dav_namespaces?.[u]}"`).join(" ")},zr=function(){return`<?xml version="1.0"?>
		<d:propfind ${Ne()}>
			<d:prop>
				${Ee()}
			</d:prop>
		</d:propfind>`},Pr=function(){return`<?xml version="1.0"?>
		<oc:filter-files ${Ne()}>
			<d:prop>
				${Ee()}
			</d:prop>
			<oc:filter-rules>
				<oc:favorite>1</oc:favorite>
			</oc:filter-rules>
		</oc:filter-files>`},Vr=function(u){return`<?xml version="1.0" encoding="UTF-8"?>
<d:searchrequest ${Ne()}
	xmlns:ns="https://github.com/icewind1991/SearchDAV/ns">
	<d:basicsearch>
		<d:select>
			<d:prop>
				${Ee()}
			</d:prop>
		</d:select>
		<d:from>
			<d:scope>
				<d:href>/files/${we()?.uid}/</d:href>
				<d:depth>infinity</d:depth>
			</d:scope>
		</d:from>
		<d:where>
			<d:and>
				<d:or>
					<d:not>
						<d:eq>
							<d:prop>
								<d:getcontenttype/>
							</d:prop>
							<d:literal>httpd/unix-directory</d:literal>
						</d:eq>
					</d:not>
					<d:eq>
						<d:prop>
							<oc:size/>
						</d:prop>
						<d:literal>0</d:literal>
					</d:eq>
				</d:or>
				<d:gt>
					<d:prop>
						<d:getlastmodified/>
					</d:prop>
					<d:literal>${u}</d:literal>
				</d:gt>
			</d:and>
		</d:where>
		<d:orderby>
			<d:order>
				<d:prop>
					<d:getlastmodified/>
				</d:prop>
				<d:descending/>
			</d:order>
		</d:orderby>
		<d:limit>
			<d:nresults>100</d:nresults>
			<ns:firstresult>0</ns:firstresult>
		</d:limit>
	</d:basicsearch>
</d:searchrequest>`},Sr=function(u=""){let h=xt.NONE;return u&&((u.includes("C")||u.includes("K"))&&(h|=xt.CREATE),u.includes("G")&&(h|=xt.READ),(u.includes("W")||u.includes("N")||u.includes("V"))&&(h|=xt.UPDATE),u.includes("D")&&(h|=xt.DELETE),u.includes("R")&&(h|=xt.SHARE)),h};var Ae=(u=>(u.Folder="folder",u.File="file",u))(Ae||{});const un=function(u,h){return u.match(h)!==null},nn=(u,h)=>{if(u.id&&typeof u.id!="number")throw new Error("Invalid id type of value");if(!u.source)throw new Error("Missing mandatory source");try{new URL(u.source)}catch{throw new Error("Invalid source format, source must be a valid URL")}if(!u.source.startsWith("http"))throw new Error("Invalid source format, only http(s) is supported");if(u.displayname&&typeof u.displayname!="string")throw new Error("Invalid displayname type");if(u.mtime&&!(u.mtime instanceof Date))throw new Error("Invalid mtime type");if(u.crtime&&!(u.crtime instanceof Date))throw new Error("Invalid crtime type");if(!u.mime||typeof u.mime!="string"||!u.mime.match(/^[-\w.]+\/[-+\w.]+$/gi))throw new Error("Missing or invalid mandatory mime");if("size"in u&&typeof u.size!="number"&&u.size!==void 0)throw new Error("Invalid size type");if("permissions"in u&&u.permissions!==void 0&&!(typeof u.permissions=="number"&&u.permissions>=xt.NONE&&u.permissions<=xt.ALL))throw new Error("Invalid permissions");if(u.owner&&u.owner!==null&&typeof u.owner!="string")throw new Error("Invalid owner type");if(u.attributes&&typeof u.attributes!="object")throw new Error("Invalid attributes type");if(u.root&&typeof u.root!="string")throw new Error("Invalid root type");if(u.root&&!u.root.startsWith("/"))throw new Error("Root must start with a leading slash");if(u.root&&!u.source.includes(u.root))throw new Error("Root must be part of the source");if(u.root&&un(u.source,h)){const v=u.source.match(h)[0];if(!u.source.includes(Ct.join(v,u.root)))throw new Error("The root must be relative to the service. e.g /files/emma")}if(u.status&&!Object.values(Oe).includes(u.status))throw new Error("Status must be a valid NodeStatus")};var Oe=(u=>(u.NEW="new",u.FAILED="failed",u.LOADING="loading",u.LOCKED="locked",u))(Oe||{});class Kt{_data;_attributes;_knownDavService=/(remote|public)\.php\/(web)?dav/i;readonlyAttributes=Object.entries(Object.getOwnPropertyDescriptors(Kt.prototype)).filter(h=>typeof h[1].get=="function"&&h[0]!=="__proto__").map(h=>h[0]);handler={set:(h,v,N)=>this.readonlyAttributes.includes(v)?!1:Reflect.set(h,v,N),deleteProperty:(h,v)=>this.readonlyAttributes.includes(v)?!1:Reflect.deleteProperty(h,v),get:(h,v,N)=>this.readonlyAttributes.includes(v)?(ve.warn(`Accessing "Node.attributes.${v}" is deprecated, access it directly on the Node instance.`),Reflect.get(this,v)):Reflect.get(h,v,N)};constructor(h,v){nn(h,v||this._knownDavService),this._data={displayname:h.attributes?.displayname,...h,attributes:{}},this._attributes=new Proxy(this._data.attributes,this.handler),this.update(h.attributes??{}),v&&(this._knownDavService=v)}get source(){return this._data.source.replace(/\/$/i,"")}get encodedSource(){const{origin:h}=new URL(this.source);return h+dr(this.source.slice(h.length))}get basename(){return Ct.basename(this.source)}get displayname(){return this._data.displayname||this.basename}set displayname(h){this._data.displayname=h}get extension(){return Ct.extname(this.source)}get dirname(){if(this.root){let v=this.source;this.isDavRessource&&(v=v.split(this._knownDavService).pop());const N=v.indexOf(this.root),x=this.root.replace(/\/$/,"");return Ct.dirname(v.slice(N+x.length)||"/")}const h=new URL(this.source);return Ct.dirname(h.pathname)}get mime(){return this._data.mime}get mtime(){return this._data.mtime}set mtime(h){this._data.mtime=h}get crtime(){return this._data.crtime}get size(){return this._data.size}set size(h){this.updateMtime(),this._data.size=h}get attributes(){return this._attributes}get permissions(){return this.owner===null&&!this.isDavRessource?xt.READ:this._data.permissions!==void 0?this._data.permissions:xt.NONE}set permissions(h){this.updateMtime(),this._data.permissions=h}get owner(){return this.isDavRessource?this._data.owner:null}get isDavRessource(){return un(this.source,this._knownDavService)}get root(){return this._data.root?this._data.root.replace(/^(.+)\/$/,"$1"):this.isDavRessource&&Ct.dirname(this.source).split(this._knownDavService).pop()||null}get path(){if(this.root){let h=this.source;this.isDavRessource&&(h=h.split(this._knownDavService).pop());const v=h.indexOf(this.root),N=this.root.replace(/\/$/,"");return h.slice(v+N.length)||"/"}return(this.dirname+"/"+this.basename).replace(/\/\//g,"/")}get fileid(){return this._data?.id}get status(){return this._data?.status}set status(h){this._data.status=h}move(h){nn({...this._data,source:h},this._knownDavService);const v=this.basename;this._data.source=h,this.displayname===v&&this.basename!==v&&(this.displayname=this.basename),this.updateMtime()}rename(h){if(h.includes("/"))throw new Error("Invalid basename");this.move(Ct.dirname(this.source)+"/"+h)}updateMtime(){this._data.mtime&&(this._data.mtime=new Date)}update(h){for(const[v,N]of Object.entries(h))try{N===void 0?delete this.attributes[v]:this.attributes[v]=N}catch(x){if(x instanceof TypeError)continue;throw x}}}class Ir extends Kt{get type(){return Ae.File}}class _r extends Kt{constructor(h){super({...h,mime:"httpd/unix-directory"})}get type(){return Ae.Folder}get extension(){return null}get mime(){return"httpd/unix-directory"}}function Rr(){return ye()?`/files/${yr()}`:`/files/${we()?.uid}`}const ln=Rr();function Lr(){const u=mr("dav");return ye()?u.replace("remote.php","public.php"):u}const hn=Lr(),Wr=function(u=hn,h={}){const v=Or(u,{headers:h});function N(x){v.setHeaders({...h,"X-Requested-With":"XMLHttpRequest",requesttoken:x??""})}return vr(N),N(wr()),Tr().patch("fetch",(x,j)=>{const E=j.headers;return E?.method&&(j.method=E.method,delete E.method),fetch(x,j)}),v},qr=(u,h="/",v=ln)=>{const N=new AbortController;return new Ot(async(x,j,E)=>{E(()=>N.abort());try{const g=(await u.getDirectoryContents(`${v}${h}`,{signal:N.signal,details:!0,data:Pr(),headers:{method:"REPORT"},includeSelf:!0})).data.filter(O=>O.filename!==h).map(O=>kr(O,v));x(g)}catch(g){j(g)}})},kr=function(u,h=ln,v=hn){let N=we()?.uid;if(ye())N=N??"anonymous";else if(!N)throw new Error("No user id found");const x=u.props,j=Sr(x?.permissions),E=String(x?.["owner-id"]||N),g=x.fileid||0,O={id:g,source:`${v}${u.filename}`,mtime:new Date(Date.parse(u.lastmod)),mime:u.mime||"application/octet-stream",displayname:x.displayname,size:x?.size||Number.parseInt(x.getcontentlength||"0"),status:g<0?Oe.FAILED:void 0,permissions:j,owner:E,root:h,attributes:{...u,...x,hasPreview:x?.["has-preview"]}};return delete O.attributes?.props,u.type==="file"?new Ir(O):new _r(O)},ge=["B","KB","MB","GB","TB","PB"],me=["B","KiB","MiB","GiB","TiB","PiB"];function Gr(u,h=!1,v=!1,N=!1){v=v&&!N,typeof u=="string"&&(u=Number(u));let x=u>0?Math.floor(Math.log(u)/Math.log(N?1e3:1024)):0;x=Math.min((v?me.length:ge.length)-1,x);const j=v?me[x]:ge[x];let E=(u/Math.pow(N?1e3:1024,x)).toFixed(1);return h===!0&&x===0?(E!=="0.0"?"< 1 ":"0 ")+(v?me[1]:ge[1]):(x<2?E=parseFloat(E).toFixed(0):E=parseFloat(E).toLocaleString(on()),E+" "+j)}function rn(u){return u instanceof Date?u.toISOString():String(u)}function Fr(u,h,v){h=h??[j=>j],v=v??[];const N=h.map((j,E)=>(v[E]??"asc")==="asc"?1:-1),x=Intl.Collator([gr(),on()],{numeric:!0,usage:"sort"});return[...u].sort((j,E)=>{for(const[g,O]of h.entries()){const s=x.compare(rn(O(j)),rn(O(E)));if(s!==0)return s*N[g]}return 0})}function Xr(u,h={}){const v={sortingMode:"basename",sortingOrder:"asc",...h},N=E=>E.lastIndexOf(".")>0?E.slice(0,E.lastIndexOf(".")):E,x=[...v.sortFavoritesFirst?[E=>E.attributes?.favorite!==1]:[],...v.sortFoldersFirst?[E=>E.type!=="folder"]:[],...v.sortingMode!=="basename"?[E=>E[v.sortingMode]]:[],E=>N(E.attributes?.displayname||E.basename),E=>E.basename],j=[...v.sortFavoritesFirst?["asc"]:[],...v.sortFoldersFirst?["asc"]:[],...v.sortingMode==="mtime"?[v.sortingOrder==="asc"?"desc":"asc"]:[],...v.sortingMode!=="mtime"&&v.sortingMode!=="basename"?[v.sortingOrder]:[],v.sortingOrder,v.sortingOrder];return Fr(u,x,j)}var Mr={};(function(u){const h=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",v=h+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",N="["+h+"]["+v+"]*",x=new RegExp("^"+N+"$"),j=function(g,O){const s=[];let i=O.exec(g);for(;i;){const f=[];f.startIndex=O.lastIndex-i[0].length;const o=i.length;for(let c=0;c<o;c++)f.push(i[c]);s.push(f),i=O.exec(g)}return s},E=function(g){const O=x.exec(g);return!(O===null||typeof O>"u")};u.isExist=function(g){return typeof g<"u"},u.isEmptyObject=function(g){return Object.keys(g).length===0},u.merge=function(g,O,s){if(O){const i=Object.keys(O),f=i.length;for(let o=0;o<f;o++)s==="strict"?g[i[o]]=[O[i[o]]]:g[i[o]]=O[i[o]]}},u.getValue=function(g){return u.isExist(g)?g:""},u.isName=E,u.getAllMatches=j,u.nameRegexp=N})(Mr),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);export{Ot as C,cn as D,$r as F,xt as P,ln as a,Ae as b,Vr as c,Wr as d,kr as e,zr as f,qr as g,Gr as h,ye as i,Br as r,Xr as s};
